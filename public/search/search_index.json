{"config":{"lang":["es"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Documentaci\u00f3n T\u00e9cnica de Reten","text":"<p>Bienvenido a la documentaci\u00f3n t\u00e9cnica de Reten. Esta documentaci\u00f3n est\u00e1 dise\u00f1ada para proporcionar informaci\u00f3n detallada sobre la estructura, funcionamiento y uso de nuestro sistema.</p>"},{"location":"#estructura-de-la-documentacion","title":"Estructura de la Documentaci\u00f3n","text":"<p>La documentaci\u00f3n est\u00e1 organizada en las siguientes secciones principales:</p>"},{"location":"#entidades","title":"Entidades","text":"<p>Documentaci\u00f3n detallada sobre las estructuras de datos principales del sistema:</p> <ul> <li>Comercios: Establecimientos comerciales y sus caracter\u00edsticas</li> <li>Vendedores: Usuarios del sistema y sus permisos</li> <li>Productos: Cat\u00e1logo de productos y sus atributos</li> <li>Cupones: Sistema de promociones y descuentos</li> <li>Suscripciones: Gesti\u00f3n de comunicaciones</li> <li>Categor\u00edas: Clasificaci\u00f3n jer\u00e1rquica de productos</li> </ul>"},{"location":"#eventos","title":"Eventos","text":"<p>Documentaci\u00f3n sobre los diferentes tipos de eventos del sistema:</p> <ul> <li>Marketing: Eventos relacionados con campa\u00f1as y comunicaciones</li> <li>Ventas: Eventos del proceso de venta</li> <li>Productos: Eventos relacionados con productos</li> <li>Usuario: Eventos de interacci\u00f3n de usuarios</li> <li>Entregas: Eventos del proceso de entrega</li> </ul>"},{"location":"#caracteristicas-principales","title":"Caracter\u00edsticas Principales","text":"<ul> <li>Documentaci\u00f3n Completa: Cada entidad y evento est\u00e1 documentado con ejemplos y casos de uso</li> <li>Validaciones: Incluye reglas de validaci\u00f3n y restricciones de datos</li> <li>Ejemplos: C\u00f3digo de ejemplo para implementaciones comunes</li> <li>Gu\u00edas: Instrucciones paso a paso para integraciones</li> </ul>"},{"location":"#comenzando","title":"Comenzando","text":"<ol> <li>Revisa la estructura general en la secci\u00f3n de Entidades</li> <li>Explora los diferentes tipos de Eventos</li> <li>Consulta los ejemplos de implementaci\u00f3n en cada secci\u00f3n</li> </ol>"},{"location":"#contribuir","title":"Contribuir","text":"<p>Si encuentras alg\u00fan error o tienes sugerencias para mejorar la documentaci\u00f3n, por favor:</p> <ol> <li>Crea un issue en el repositorio</li> <li>Prop\u00f3n cambios mediante pull requests</li> <li>Contacta al equipo de desarrollo</li> </ol>"},{"location":"#soporte","title":"Soporte","text":"<p>Para obtener ayuda adicional:</p> <ul> <li>Revisa la documentaci\u00f3n detallada de cada secci\u00f3n</li> <li>Contacta al equipo de soporte t\u00e9cnico</li> <li>Consulta los ejemplos de implementaci\u00f3n</li> </ul>"},{"location":"entities/","title":"Entidades","text":"<p>Las entidades representan los objetos principales del sistema Reten. Cada entidad tiene propiedades que definen sus caracter\u00edsticas y comportamientos, manteniendo el estado actual de los diferentes componentes del sistema.</p>"},{"location":"entities/#caracteristicas-comunes","title":"Caracter\u00edsticas Comunes","text":"<p>Todas las entidades comparten: - Identificaci\u00f3n dual (ID interno Reten y ID externo cliente) - Trazabilidad temporal (fechas de creaci\u00f3n/actualizaci\u00f3n) - Extensibilidad mediante atributos personalizados - Campos de auditor\u00eda y metadatos</p>"},{"location":"entities/#catalogo-de-entidades","title":"Cat\u00e1logo de Entidades","text":""},{"location":"entities/#comercios","title":"Comercios","text":"<p>Establecimientos comerciales que interact\u00faan con la plataforma. - Informaci\u00f3n de contacto y ubicaci\u00f3n - Grupos y clasificaciones - Datos de facturaci\u00f3n y entrega</p>"},{"location":"entities/#vendedores","title":"Vendedores","text":"<p>Usuarios del CPG que gestionan las relaciones comerciales. - Roles y permisos - Informaci\u00f3n de acceso - Asignaciones y territorios</p>"},{"location":"entities/#productos","title":"Productos","text":"<p>Cat\u00e1logo de productos disponibles para comercializaci\u00f3n. - Informaci\u00f3n b\u00e1sica y precios - Categor\u00edas y atributos - Configuraciones espec\u00edficas</p>"},{"location":"entities/#cupones","title":"Cupones","text":"<p>Mecanismos de promoci\u00f3n y descuento. - Reglas y condiciones - Periodos de validez - Restricciones de uso</p>"},{"location":"entities/#suscripciones","title":"Suscripciones","text":"<p>Configuraciones de comunicaci\u00f3n y notificaciones. - Preferencias por canal - Estados y configuraciones - Gesti\u00f3n de consentimientos</p>"},{"location":"entities/#categorias","title":"Categor\u00edas","text":"<p>Estructura jer\u00e1rquica para la organizaci\u00f3n de productos. - Jerarqu\u00eda y relaciones - Atributos por nivel - Metadatos de clasificaci\u00f3n</p>"},{"location":"entities/#convenciones-generales","title":"Convenciones Generales","text":"<ul> <li>Campos en <code>snake_case</code></li> <li>Fechas en formato ISO 8601 (UTC)</li> <li>IDs descriptivos y \u00fanicos por entidad</li> <li>Campos requeridos marcados como <code>not null</code></li> <li>Referencias mediante IDs para mantener integridad referencial</li> </ul> <p>Para m\u00e1s detalles sobre cada entidad, consulta su documentaci\u00f3n espec\u00edfica en los enlaces proporcionados. </p>"},{"location":"entities/channel_subscription/","title":"Suscripci\u00f3n a Canales","text":"<p>Las suscripciones a canales representan las preferencias de comunicaci\u00f3n y notificaciones de los usuarios en la plataforma Reten. Esta entidad almacena la informaci\u00f3n sobre los canales de comunicaci\u00f3n, consentimientos, y configuraciones espec\u00edficas para cada usuario.</p>"},{"location":"entities/channel_subscription/#estructura-de-datos","title":"Estructura de Datos","text":"<pre><code>{\n  // Identificadores\n  \"subscription_id\": \"string\",    // Identificador \u00fanico de la suscripci\u00f3n (not null)\n  \"user_id\": \"string\",           // Identificador del usuario (not null)\n\n  // Informaci\u00f3n del canal\n  \"channel\": {\n    \"type\": \"string\",            // Tipo de canal (email, sms, push, whatsapp) (not null)\n    \"identifier\": \"string\",      // Identificador del canal (email, tel\u00e9fono, token) (not null)\n    \"name\": \"string\",            // Nombre descriptivo del canal\n    \"status\": \"string\"           // Estado del canal (active, inactive, pending, blocked)\n  },\n\n  // Consentimientos y preferencias\n  \"preferences\": {\n    \"marketing\": \"boolean\",      // Comunicaciones de marketing\n    \"notifications\": \"boolean\",  // Notificaciones del sistema\n    \"promotions\": \"boolean\",    // Ofertas y promociones\n    \"news\": \"boolean\",          // Noticias y actualizaciones\n    \"orders\": \"boolean\",        // Actualizaciones de \u00f3rdenes\n    \"support\": \"boolean\"        // Comunicaciones de soporte\n  },\n\n  // Configuraci\u00f3n de frecuencia\n  \"frequency\": {\n    \"type\": \"string\",           // Tipo de frecuencia (immediate, daily, weekly, custom)\n    \"time_zone\": \"string\",      // Zona horaria del usuario\n    \"quiet_hours\": {            // Horas de no disturbar\n      \"start\": \"string\",        // Hora de inicio (HH:mm)\n      \"end\": \"string\"          // Hora de fin (HH:mm)\n    },\n    \"custom_schedule\": JSON     // Configuraci\u00f3n personalizada de horarios\n  },\n\n  // Metadatos de verificaci\u00f3n\n  \"verification\": {\n    \"is_verified\": \"boolean\",   // Canal verificado\n    \"verified_at\": \"timestamp\", // Fecha de verificaci\u00f3n\n    \"verification_method\": \"string\", // M\u00e9todo de verificaci\u00f3n usado\n    \"last_verification_attempt\": \"timestamp\" // \u00daltimo intento de verificaci\u00f3n\n  },\n\n  // Marcas temporales\n  \"created_at\": \"timestamp\",    // Fecha de creaci\u00f3n (not null)\n  \"updated_at\": \"timestamp\",    // \u00daltima actualizaci\u00f3n (not null)\n  \"_created_at\": \"timestamp\",   // Fecha de creaci\u00f3n en BigQuery (not null)\n  \"_updated_at\": \"timestamp\"    // \u00daltima actualizaci\u00f3n en BigQuery (not null)\n}\n</code></pre>"},{"location":"entities/channel_subscription/#tipos-de-canal","title":"Tipos de Canal","text":"<p>Los tipos de canal disponibles son:</p> <ul> <li><code>email</code>: Comunicaciones por correo electr\u00f3nico</li> <li><code>sms</code>: Mensajes de texto SMS</li> <li><code>push</code>: Notificaciones push m\u00f3viles o web</li> <li><code>whatsapp</code>: Mensajes por WhatsApp</li> </ul>"},{"location":"entities/channel_subscription/#estados-del-canal","title":"Estados del Canal","text":"<ul> <li><code>active</code>: Canal activo y verificado</li> <li><code>inactive</code>: Canal temporalmente desactivado</li> <li><code>pending</code>: Pendiente de verificaci\u00f3n</li> <li><code>blocked</code>: Canal bloqueado por errores o spam</li> </ul>"},{"location":"entities/channel_subscription/#tipos-de-frecuencia","title":"Tipos de Frecuencia","text":"<ul> <li><code>immediate</code>: Env\u00edo inmediato</li> <li><code>daily</code>: Resumen diario</li> <li><code>weekly</code>: Resumen semanal</li> <li><code>custom</code>: Configuraci\u00f3n personalizada</li> </ul>"},{"location":"entities/channel_subscription/#campos-detallados","title":"Campos Detallados","text":""},{"location":"entities/channel_subscription/#identificadores","title":"Identificadores","text":"Campo Tipo Requerido Descripci\u00f3n subscription_id string S\u00ed Identificador \u00fanico user_id string S\u00ed ID del usuario data_object_id string S\u00ed ID del objeto de datos"},{"location":"entities/channel_subscription/#canal","title":"Canal","text":"Campo Tipo Requerido Descripci\u00f3n type string S\u00ed Tipo de canal identifier string S\u00ed Identificador del canal name string No Nombre descriptivo status string S\u00ed Estado actual"},{"location":"entities/channel_subscription/#validaciones","title":"Validaciones","text":""},{"location":"entities/channel_subscription/#validaciones-generales","title":"Validaciones Generales","text":"<ol> <li>Identificadores</li> <li><code>subscription_id</code> debe ser \u00fanico</li> <li><code>user_id</code> debe corresponder a un usuario existente</li> <li> <p><code>identifier</code> debe ser v\u00e1lido seg\u00fan el tipo de canal</p> </li> <li> <p>Canal</p> </li> <li>Email debe ser v\u00e1lido</li> <li>N\u00famero de tel\u00e9fono en formato internacional</li> <li> <p>Token de push debe ser v\u00e1lido</p> </li> <li> <p>Preferencias</p> </li> <li>Al menos una preferencia debe estar activa</li> <li>Combinaciones v\u00e1lidas seg\u00fan tipo de canal</li> </ol>"},{"location":"entities/channel_subscription/#validaciones-de-negocio","title":"Validaciones de Negocio","text":"<ol> <li>Verificaci\u00f3n</li> <li>Canales cr\u00edticos deben estar verificados</li> <li>Per\u00edodo m\u00e1ximo entre verificaciones</li> <li> <p>L\u00edmite de intentos de verificaci\u00f3n</p> </li> <li> <p>Frecuencia</p> </li> <li>Horarios en formato v\u00e1lido</li> <li>Zona horaria v\u00e1lida</li> <li>Quiet hours coherentes</li> </ol>"},{"location":"entities/channel_subscription/#ejemplos","title":"Ejemplos","text":""},{"location":"entities/channel_subscription/#suscripcion-email","title":"Suscripci\u00f3n Email","text":"<pre><code>{\n  \"subscription_id\": \"SUB_001\",\n  \"user_id\": \"USER_001\",\n  \"channel\": {\n    \"type\": \"email\",\n    \"identifier\": \"usuario@ejemplo.com\",\n    \"name\": \"Email Principal\",\n    \"status\": \"active\"\n  },\n  \"preferences\": {\n    \"marketing\": true,\n    \"notifications\": true,\n    \"promotions\": true,\n    \"news\": false,\n    \"orders\": true,\n    \"support\": true\n  },\n  \"frequency\": {\n    \"type\": \"immediate\",\n    \"time_zone\": \"America/Santiago\"\n  },\n  \"verification\": {\n    \"is_verified\": true,\n    \"verified_at\": \"2024-03-19T10:00:00Z\",\n    \"verification_method\": \"email_link\"\n  }\n}\n</code></pre>"},{"location":"entities/channel_subscription/#suscripcion-whatsapp","title":"Suscripci\u00f3n WhatsApp","text":"<pre><code>{\n  \"subscription_id\": \"SUB_002\",\n  \"user_id\": \"USER_001\",\n  \"channel\": {\n    \"type\": \"whatsapp\",\n    \"identifier\": \"+56912345678\",\n    \"name\": \"WhatsApp Principal\",\n    \"status\": \"active\"\n  },\n  \"preferences\": {\n    \"marketing\": false,\n    \"notifications\": true,\n    \"promotions\": false,\n    \"news\": false,\n    \"orders\": true,\n    \"support\": true\n  },\n  \"frequency\": {\n    \"type\": \"custom\",\n    \"time_zone\": \"America/Santiago\",\n    \"quiet_hours\": {\n      \"start\": \"22:00\",\n      \"end\": \"08:00\"\n    }\n  },\n  \"verification\": {\n    \"is_verified\": true,\n    \"verified_at\": \"2024-03-19T11:00:00Z\",\n    \"verification_method\": \"otp\"\n  }\n}\n</code></pre>"},{"location":"entities/channel_subscription/#notas-de-implementacion","title":"Notas de Implementaci\u00f3n","text":""},{"location":"entities/channel_subscription/#gestion-de-verificacion","title":"Gesti\u00f3n de Verificaci\u00f3n","text":"<ol> <li>M\u00e9todos de Verificaci\u00f3n</li> <li>Link de verificaci\u00f3n por email</li> <li>C\u00f3digo OTP por SMS/WhatsApp</li> <li> <p>Confirmaci\u00f3n doble opt-in</p> </li> <li> <p>Proceso de Verificaci\u00f3n</p> </li> <li>Env\u00edo de c\u00f3digo/link</li> <li>Validaci\u00f3n de respuesta</li> <li>Actualizaci\u00f3n de estado</li> <li>Registro de timestamp</li> </ol>"},{"location":"entities/channel_subscription/#optimizacion","title":"Optimizaci\u00f3n","text":"<ol> <li>Cach\u00e9</li> <li>Preferencias activas</li> <li>Estados de verificaci\u00f3n</li> <li> <p>Estad\u00edsticas de uso</p> </li> <li> <p>Agrupaci\u00f3n</p> </li> <li>Mensajes por frecuencia</li> <li>Respeto de quiet hours</li> <li>Priorizaci\u00f3n de canales</li> </ol>"},{"location":"entities/channel_subscription/#integracion-con-otros-sistemas","title":"Integraci\u00f3n con Otros Sistemas","text":""},{"location":"entities/channel_subscription/#apis","title":"APIs","text":"<ol> <li> <p>Endpoints Principales <pre><code>GET    /api/v1/subscriptions/{subscription_id}\nPOST   /api/v1/subscriptions\nPUT    /api/v1/subscriptions/{subscription_id}\nDELETE /api/v1/subscriptions/{subscription_id}\n</code></pre></p> </li> <li> <p>Endpoints de Verificaci\u00f3n <pre><code>POST   /api/v1/subscriptions/{subscription_id}/verify\nPOST   /api/v1/subscriptions/{subscription_id}/resend-verification\n</code></pre></p> </li> </ol>"},{"location":"entities/channel_subscription/#webhooks","title":"Webhooks","text":"<ol> <li>Eventos Disponibles</li> <li><code>subscription.created</code></li> <li><code>subscription.verified</code></li> <li><code>subscription.updated</code></li> <li><code>subscription.deleted</code></li> <li> <p><code>subscription.blocked</code></p> </li> <li> <p>Formato de Payload <pre><code>{\n  \"event\": \"subscription.verified\",\n  \"timestamp\": \"2024-03-19T14:30:00Z\",\n  \"data\": {\n    \"subscription_id\": \"string\",\n    \"user_id\": \"string\",\n    \"channel\": {\n      \"type\": \"string\",\n      \"identifier\": \"string\"\n    },\n    \"verification\": {\n      \"method\": \"string\",\n      \"timestamp\": \"string\"\n    }\n  }\n}\n</code></pre></p> </li> </ol>"},{"location":"entities/channel_subscription/#preguntas-frecuentes","title":"Preguntas Frecuentes","text":"<ol> <li>\u00bfC\u00f3mo manejar cambios de identificador?</li> <li>Requiere nueva verificaci\u00f3n</li> <li>Mantener historial de cambios</li> <li> <p>Per\u00edodo de gracia para transici\u00f3n</p> </li> <li> <p>\u00bfQu\u00e9 hacer con canales inactivos?</p> </li> <li>Pol\u00edtica de reactivaci\u00f3n</li> <li>Limpieza peri\u00f3dica</li> <li> <p>Notificaci\u00f3n al usuario</p> </li> <li> <p>\u00bfC\u00f3mo gestionar preferencias globales?</p> </li> <li>Herencia de configuraci\u00f3n</li> <li>Override por canal</li> <li>Sincronizaci\u00f3n entre canales </li> </ol>"},{"location":"entities/category/","title":"Categor\u00edas","text":"<p>Las categor\u00edas permiten organizar y clasificar productos de manera jer\u00e1rquica en la plataforma Reten. Esta entidad maneja la estructura de navegaci\u00f3n, filtrado y agrupaci\u00f3n de productos.</p>"},{"location":"entities/category/#estructura-de-datos","title":"Estructura de Datos","text":"<pre><code>{\n  // Identificadores\n  \"category_id\": \"string\",      // Identificador \u00fanico de la categor\u00eda (not null)\n  \"parent_id\": \"string\",        // ID de la categor\u00eda padre (null si es ra\u00edz)\n  \"data_object_id\": \"string\",   // ID del objeto de datos (not null)\n\n  // Informaci\u00f3n b\u00e1sica\n  \"name\": {\n    \"display_name\": \"string\",   // Nombre para mostrar (not null)\n    \"slug\": \"string\",          // URL amigable (not null)\n    \"description\": \"string\"    // Descripci\u00f3n de la categor\u00eda\n  },\n\n  // Metadatos\n  \"metadata\": {\n    \"level\": \"number\",         // Nivel en la jerarqu\u00eda (0 para ra\u00edz)\n    \"path\": [\"string\"],        // Array de IDs desde la ra\u00edz hasta esta categor\u00eda\n    \"is_leaf\": \"boolean\",      // Indica si es una categor\u00eda final\n    \"has_products\": \"boolean\", // Indica si tiene productos asociados\n    \"position\": \"number\",      // Posici\u00f3n para ordenamiento manual\n    \"tags\": [\"string\"]         // Tags para b\u00fasqueda alternativa\n  },\n\n  // SEO\n  \"seo\": {\n    \"title\": \"string\",         // T\u00edtulo para SEO\n    \"description\": \"string\",   // Descripci\u00f3n para SEO\n    \"keywords\": [\"string\"],    // Palabras clave\n    \"canonical_url\": \"string\"  // URL can\u00f3nica\n  },\n\n  // Marcas temporales\n  \"created_at\": \"timestamp\",   // Fecha de creaci\u00f3n (not null)\n  \"updated_at\": \"timestamp\",   // \u00daltima actualizaci\u00f3n (not null)\n  \"_created_at\": \"timestamp\",  // Fecha de creaci\u00f3n en BigQuery (not null)\n  \"_updated_at\": \"timestamp\"   // \u00daltima actualizaci\u00f3n en BigQuery (not null)\n}\n</code></pre>"},{"location":"entities/category/#campos-detallados","title":"Campos Detallados","text":""},{"location":"entities/category/#identificadores","title":"Identificadores","text":"Campo Tipo Requerido Descripci\u00f3n category_id string S\u00ed Identificador \u00fanico parent_id string No ID de la categor\u00eda padre data_object_id string S\u00ed ID del objeto de datos"},{"location":"entities/category/#nombre","title":"Nombre","text":"Campo Tipo Requerido Descripci\u00f3n display_name string S\u00ed Nombre para mostrar slug string S\u00ed URL amigable description string No Descripci\u00f3n de la categor\u00eda"},{"location":"entities/category/#metadatos","title":"Metadatos","text":"Campo Tipo Requerido Descripci\u00f3n level number S\u00ed Nivel en la jerarqu\u00eda path array S\u00ed Ruta desde la ra\u00edz is_leaf boolean S\u00ed Es categor\u00eda final has_products boolean S\u00ed Tiene productos position number No Posici\u00f3n de ordenamiento tags array No Tags para b\u00fasqueda alternativa"},{"location":"entities/category/#validaciones","title":"Validaciones","text":""},{"location":"entities/category/#validaciones-generales","title":"Validaciones Generales","text":"<ol> <li>Identificadores</li> <li><code>category_id</code> debe ser \u00fanico</li> <li><code>parent_id</code> debe existir si no es categor\u00eda ra\u00edz</li> <li> <p><code>slug</code> debe ser \u00fanico dentro del mismo nivel</p> </li> <li> <p>Jerarqu\u00eda</p> </li> <li>No se permiten ciclos en la estructura</li> <li>M\u00e1ximo 5 niveles de profundidad</li> <li> <p>Una categor\u00eda no puede ser su propio ancestro</p> </li> <li> <p>Metadatos</p> </li> <li><code>level</code> debe ser consistente con la posici\u00f3n en la jerarqu\u00eda</li> <li><code>path</code> debe incluir todos los ancestros en orden</li> <li><code>position</code> debe ser \u00fanico dentro del mismo nivel y padre</li> </ol>"},{"location":"entities/category/#validaciones-de-negocio","title":"Validaciones de Negocio","text":"<ol> <li>Visibilidad</li> <li>Categor\u00edas padres visibles si tienen hijos visibles</li> <li>Categor\u00edas con productos deben ser visibles</li> <li> <p>Categor\u00edas ocultas no aparecen en navegaci\u00f3n</p> </li> <li> <p>SEO</p> </li> <li>URLs amigables sin caracteres especiales</li> <li>T\u00edtulos y descripciones con longitud adecuada</li> <li> <p>Keywords relevantes y no duplicados</p> </li> <li> <p>Tags</p> </li> <li>Sin caracteres especiales</li> <li>Longitud m\u00e1xima de 50 caracteres por tag</li> <li>M\u00e1ximo 20 tags por categor\u00eda</li> <li>No duplicados dentro de la misma categor\u00eda</li> </ol>"},{"location":"entities/category/#ejemplos","title":"Ejemplos","text":""},{"location":"entities/category/#categoria-raiz","title":"Categor\u00eda Ra\u00edz","text":"<pre><code>{\n  \"category_id\": \"CAT_001\",\n  \"parent_id\": null,\n  \"name\": {\n    \"display_name\": \"Pinturas\",\n    \"slug\": \"pinturas\",\n    \"description\": \"Todo tipo de pinturas y recubrimientos\"\n  },\n  \"metadata\": {\n    \"level\": 0,\n    \"path\": [\"CAT_001\"],\n    \"is_leaf\": false,\n    \"has_products\": false,\n    \"position\": 1,\n    \"tags\": [\"pintura\", \"recubrimiento\", \"acabados\", \"decoraci\u00f3n\"]\n  },\n  \"seo\": {\n    \"title\": \"Pinturas y Recubrimientos | Reten\",\n    \"description\": \"Encuentra todo tipo de pinturas y recubrimientos para tus proyectos\",\n    \"keywords\": [\"pinturas\", \"recubrimientos\", \"pintura interior\", \"pintura exterior\"]\n  }\n}\n</code></pre>"},{"location":"entities/category/#categoria-hija","title":"Categor\u00eda Hija","text":"<pre><code>{\n  \"category_id\": \"CAT_002\",\n  \"parent_id\": \"CAT_001\",\n  \"name\": {\n    \"display_name\": \"Pinturas L\u00e1tex\",\n    \"slug\": \"pinturas-latex\",\n    \"description\": \"Pinturas l\u00e1tex para interiores y exteriores\"\n  },\n  \"metadata\": {\n    \"level\": 1,\n    \"path\": [\"CAT_001\", \"CAT_002\"],\n    \"is_leaf\": true,\n    \"has_products\": true,\n    \"position\": 1,\n    \"tags\": [\"latex\", \"pintura agua\", \"lavable\", \"mate\", \"satinado\"]\n  },\n  \"seo\": {\n    \"title\": \"Pinturas L\u00e1tex Interior y Exterior | Reten\",\n    \"description\": \"Amplia selecci\u00f3n de pinturas l\u00e1tex para interiores y exteriores\",\n    \"keywords\": [\"pintura l\u00e1tex\", \"l\u00e1tex interior\", \"l\u00e1tex exterior\"]\n  }\n}\n</code></pre>"},{"location":"entities/category/#notas-de-implementacion","title":"Notas de Implementaci\u00f3n","text":""},{"location":"entities/category/#gestion-de-jerarquia","title":"Gesti\u00f3n de Jerarqu\u00eda","text":"<ol> <li>Actualizaci\u00f3n de Metadatos</li> <li>Recalcular <code>level</code> y <code>path</code> al mover categor\u00edas</li> <li>Actualizar <code>is_leaf</code> al agregar/eliminar hijos</li> <li> <p>Mantener consistencia de <code>has_products</code></p> </li> <li> <p>Ordenamiento</p> </li> <li>Por <code>position</code> dentro del mismo nivel</li> <li>Por <code>display_name</code> si no hay posici\u00f3n</li> <li>Considerar ordenamiento personalizado por comercio</li> </ol>"},{"location":"entities/category/#optimizacion","title":"Optimizaci\u00f3n","text":"<ol> <li>Cach\u00e9</li> <li>\u00c1rbol de categor\u00edas completo</li> <li>Rutas de navegaci\u00f3n frecuentes</li> <li> <p>Conteos de productos</p> </li> <li> <p>Consultas</p> </li> <li>\u00cdndices por <code>parent_id</code> y <code>path</code></li> <li>Materializar rutas completas</li> <li>Precalcular breadcrumbs</li> </ol>"},{"location":"entities/category/#integracion-con-otros-sistemas","title":"Integraci\u00f3n con Otros Sistemas","text":""},{"location":"entities/category/#apis","title":"APIs","text":"<ol> <li> <p>Endpoints Principales <pre><code>GET    /api/v1/categories\nGET    /api/v1/categories/{category_id}\nPOST   /api/v1/categories\nPUT    /api/v1/categories/{category_id}\nDELETE /api/v1/categories/{category_id}\n</code></pre></p> </li> <li> <p>Endpoints de Jerarqu\u00eda <pre><code>GET    /api/v1/categories/{category_id}/children\nGET    /api/v1/categories/{category_id}/ancestors\nPOST   /api/v1/categories/{category_id}/move\n</code></pre></p> </li> </ol>"},{"location":"entities/category/#webhooks","title":"Webhooks","text":"<ol> <li>Eventos Disponibles</li> <li><code>category.created</code></li> <li><code>category.updated</code></li> <li><code>category.deleted</code></li> <li> <p><code>category.moved</code></p> </li> <li> <p>Formato de Payload <pre><code>{\n  \"event\": \"category.moved\",\n  \"timestamp\": \"2024-03-19T14:30:00Z\",\n  \"data\": {\n    \"category_id\": \"string\",\n    \"old_parent_id\": \"string\",\n    \"new_parent_id\": \"string\",\n    \"old_path\": [\"string\"],\n    \"new_path\": [\"string\"]\n  }\n}\n</code></pre></p> </li> </ol>"},{"location":"entities/category/#preguntas-frecuentes","title":"Preguntas Frecuentes","text":"<ol> <li>\u00bfC\u00f3mo manejar la eliminaci\u00f3n de categor\u00edas?</li> <li>Verificar productos asociados</li> <li>Opci\u00f3n de mover productos</li> <li> <p>Mantener historial para URLs</p> </li> <li> <p>\u00bfC\u00f3mo gestionar URLs amigables?</p> </li> <li>Generaci\u00f3n autom\u00e1tica desde nombre</li> <li>Validaci\u00f3n de unicidad</li> <li> <p>Redirecciones 301 para cambios</p> </li> <li> <p>\u00bfC\u00f3mo optimizar la navegaci\u00f3n?</p> </li> <li>Precarga de rutas comunes</li> <li>Cach\u00e9 de \u00e1rbol de categor\u00edas</li> <li>Paginaci\u00f3n de productos </li> </ol>"},{"location":"entities/commerce/","title":"Comercios","text":"<p>Los comercios son los establecimientos o negocios que interact\u00faan con la plataforma Reten. Esta entidad almacena toda la informaci\u00f3n relevante sobre los clientes comerciales.</p>"},{"location":"entities/commerce/#estructura-de-datos","title":"Estructura de Datos","text":"<pre><code>{\n  // Identificadores\n  \"user_id\": \"string\",           // Identificador principal (not null)\n  \"external_id\": \"string\",       // Identificador externo del cliente\n\n  // Informaci\u00f3n b\u00e1sica\n  \"name\": \"string\",              // Nombre del comercio\n\n  // Marcas temporales\n  \"created_at\": \"timestamp\",     // Fecha de creaci\u00f3n en sistema cliente (not null)\n  \"updated_at\": \"timestamp\",     // Fecha de \u00faltima actualizaci\u00f3n en sistema cliente\n  \"_created_at\": \"timestamp\",    // Fecha de creaci\u00f3n en Reten\n  \"_updated_at\": \"timestamp\",    // Fecha de \u00faltima actualizaci\u00f3n en Reten\n  \"sign_up_date\": \"timestamp\",   // Fecha de registro (not null)\n  \"set_up_date\": \"timestamp\",    // Fecha de configuraci\u00f3n inicial\n\n  // Ubicaci\u00f3n\n  \"country\": \"string\",           // Pa\u00eds del comercio\n\n  // Informaci\u00f3n de contacto\n  \"contacts\": [{\n    \"email\": \"string\",\n    \"phone\": \"string\",\n    \"type\": \"string\"            // primary, secondary, billing, etc.\n  }],\n\n  // Informaci\u00f3n personal\n  \"personal_info\": {\n    \"first_name\": \"string\",\n    \"last_name\": \"string\",\n    \"country\": \"string\",\n    \"date_of_birth\": \"timestamp\"\n  },\n\n  // Direcciones\n  \"addresses\": [{\n    \"type\": \"string\",           // shipping, billing, warehouse, etc.\n    \"name\": \"string\",           // Nombre de la direcci\u00f3n\n    \"street\": \"string\",         // Calle\n    \"commune\": \"string\",        // Comuna\n    \"city\": \"string\",          // Ciudad\n    \"region\": \"string\",        // Regi\u00f3n\n    \"number\": \"string\",        // N\u00famero\n    \"dept_number\": \"string\",   // N\u00famero de departamento/oficina\n    \"lat\": \"string\",          // Latitud\n    \"long\": \"string\",         // Longitud\n    \"is_default\": \"boolean\"   // Indica si es la direcci\u00f3n principal\n  }],\n\n  // Atributos personalizados\n  \"attributes\": [{\n    \"key\": \"string\",\n    \"value\": \"string\"\n  }],\n\n  // Grupos y clasificaciones\n  \"groups\": [{\n    \"group_type\": \"string\",\n    \"attributes\": [{\n      \"key\": \"string\",\n      \"value\": \"string\"\n    }]\n  }],\n\n  // IDs adicionales\n  \"miscellaneous_id\": [{\n    \"platform\": \"string\",      // Plataforma relacionada\n    \"misc_id\": \"string\"       // ID en esa plataforma\n  }]\n}\n</code></pre>"},{"location":"entities/commerce/#campos-detallados","title":"Campos Detallados","text":""},{"location":"entities/commerce/#identificadores","title":"Identificadores","text":"Campo Tipo Requerido Descripci\u00f3n user_id string S\u00ed Identificador \u00fanico en Reten external_id string No Identificador en el sistema del cliente"},{"location":"entities/commerce/#informacion-basica","title":"Informaci\u00f3n B\u00e1sica","text":"Campo Tipo Requerido Descripci\u00f3n name string S\u00ed Nombre comercial del establecimiento country string No Pa\u00eds donde opera el comercio"},{"location":"entities/commerce/#marcas-temporales","title":"Marcas Temporales","text":"Campo Tipo Requerido Descripci\u00f3n created_at timestamp S\u00ed Fecha de creaci\u00f3n en sistema cliente updated_at timestamp No \u00daltima actualizaci\u00f3n en sistema cliente _created_at timestamp S\u00ed Fecha de creaci\u00f3n en Reten _updated_at timestamp No \u00daltima actualizaci\u00f3n en Reten sign_up_date timestamp S\u00ed Fecha de registro inicial set_up_date timestamp No Fecha de configuraci\u00f3n completada"},{"location":"entities/commerce/#contactos","title":"Contactos","text":"<p>Los contactos se manejan como un array para permitir m\u00faltiples puntos de contacto:</p> Campo Tipo Descripci\u00f3n email string Direcci\u00f3n de correo electr\u00f3nico phone string N\u00famero telef\u00f3nico type string Tipo de contacto (primary, billing, etc.) <p>Tipos de Contacto V\u00e1lidos: - <code>primary</code>: Contacto principal - <code>billing</code>: Contacto de facturaci\u00f3n - <code>technical</code>: Contacto t\u00e9cnico - <code>marketing</code>: Contacto de marketing - <code>support</code>: Contacto de soporte</p>"},{"location":"entities/commerce/#direcciones","title":"Direcciones","text":"<p>Las direcciones se manejan como un array para permitir m\u00faltiples ubicaciones:</p> Campo Tipo Descripci\u00f3n type string Tipo de direcci\u00f3n name string Nombre identificativo street string Nombre de la calle number string N\u00famero exterior dept_number string N\u00famero interior/departamento commune string Comuna o municipio city string Ciudad region string Regi\u00f3n o estado lat string Latitud long string Longitud is_default boolean Indica si es la direcci\u00f3n principal <p>Tipos de Direcci\u00f3n V\u00e1lidos: - <code>billing</code>: Direcci\u00f3n de facturaci\u00f3n - <code>shipping</code>: Direcci\u00f3n de env\u00edo - <code>warehouse</code>: Almac\u00e9n o bodega - <code>office</code>: Oficina - <code>store</code>: Tienda f\u00edsica</p>"},{"location":"entities/commerce/#grupos-y-clasificaciones","title":"Grupos y Clasificaciones","text":"<p>Los grupos permiten categorizar y segmentar comercios:</p> <pre><code>{\n  \"groups\": [{\n    \"group_type\": \"channel\",\n    \"attributes\": [{\n      \"key\": \"category\",\n      \"value\": \"retail\"\n    }, {\n      \"key\": \"sub_category\",\n      \"value\": \"convenience_store\"\n    }]\n  }, {\n    \"group_type\": \"segment\",\n    \"attributes\": [{\n      \"key\": \"size\",\n      \"value\": \"medium\"\n    }, {\n      \"key\": \"potential\",\n      \"value\": \"high\"\n    }]\n  }]\n}\n</code></pre> <p>Tipos de Grupo Comunes: - <code>channel</code>: Canal de ventas - <code>segment</code>: Segmentaci\u00f3n de mercado - <code>territory</code>: Divisi\u00f3n territorial - <code>portfolio</code>: Portafolio de productos</p>"},{"location":"entities/commerce/#validaciones","title":"Validaciones","text":""},{"location":"entities/commerce/#validaciones-generales","title":"Validaciones Generales","text":"<ol> <li>Identificadores</li> <li><code>user_id</code> debe ser \u00fanico en todo el sistema</li> <li> <p><code>external_id</code> debe ser \u00fanico por cliente</p> </li> <li> <p>Fechas</p> </li> <li><code>created_at</code> no puede ser posterior a <code>updated_at</code></li> <li><code>sign_up_date</code> no puede ser posterior a <code>set_up_date</code></li> <li> <p>Todas las fechas deben ser v\u00e1lidas y en formato ISO 8601</p> </li> <li> <p>Contactos</p> </li> <li>Debe existir al menos un contacto de tipo <code>primary</code></li> <li>Los emails deben ser \u00fanicos dentro del array de contactos</li> <li>Los emails deben tener formato v\u00e1lido</li> <li> <p>Los tel\u00e9fonos deben tener formato v\u00e1lido seg\u00fan el pa\u00eds</p> </li> <li> <p>Direcciones</p> </li> <li>Debe existir al menos una direcci\u00f3n marcada como <code>is_default: true</code></li> <li>Las coordenadas geogr\u00e1ficas deben ser v\u00e1lidas si se proporcionan</li> <li>Los tipos de direcci\u00f3n deben ser valores predefinidos</li> </ol>"},{"location":"entities/commerce/#validaciones-de-negocio","title":"Validaciones de Negocio","text":"<ol> <li>Configuraci\u00f3n Inicial</li> <li><code>set_up_date</code> solo se establece cuando se completan todos los campos requeridos</li> <li> <p>La configuraci\u00f3n requiere al menos una direcci\u00f3n y un contacto v\u00e1lidos</p> </li> <li> <p>Grupos</p> </li> <li>Los <code>group_type</code> deben corresponder a tipos predefinidos</li> <li> <p>Los atributos deben ser v\u00e1lidos para el tipo de grupo</p> </li> <li> <p>Atributos</p> </li> <li>Las claves de atributos deben ser \u00fanicas por comercio</li> <li>Los valores deben corresponder al tipo esperado</li> </ol>"},{"location":"entities/commerce/#ejemplos-de-uso","title":"Ejemplos de Uso","text":""},{"location":"entities/commerce/#comercio-basico","title":"Comercio B\u00e1sico","text":"<pre><code>{\n  \"user_id\": \"COM_001\",\n  \"external_id\": \"CLIENT_123\",\n  \"name\": \"Minimarket Don Jos\u00e9\",\n  \"created_at\": \"2024-03-19T10:00:00Z\",\n  \"sign_up_date\": \"2024-03-19T10:00:00Z\",\n  \"country\": \"CL\",\n  \"contacts\": [{\n    \"type\": \"primary\",\n    \"email\": \"jose@minimarket.cl\",\n    \"phone\": \"+56912345678\"\n  }],\n  \"addresses\": [{\n    \"type\": \"store\",\n    \"name\": \"Tienda Principal\",\n    \"street\": \"Av. Providencia\",\n    \"number\": \"1234\",\n    \"city\": \"Santiago\",\n    \"region\": \"Metropolitana\",\n    \"is_default\": true\n  }]\n}\n</code></pre>"},{"location":"entities/commerce/#comercio-con-multiples-ubicaciones","title":"Comercio con M\u00faltiples Ubicaciones","text":"<pre><code>{\n  \"user_id\": \"COM_002\",\n  \"name\": \"Supermercados El Sol\",\n  \"addresses\": [{\n    \"type\": \"store\",\n    \"name\": \"Sucursal Centro\",\n    \"street\": \"Estado\",\n    \"number\": \"100\",\n    \"city\": \"Santiago\",\n    \"is_default\": true\n  }, {\n    \"type\": \"warehouse\",\n    \"name\": \"Bodega Principal\",\n    \"street\": \"Los Industriales\",\n    \"number\": \"500\",\n    \"city\": \"Santiago\",\n    \"is_default\": false\n  }, {\n    \"type\": \"office\",\n    \"name\": \"Oficinas Administrativas\",\n    \"street\": \"Apoquindo\",\n    \"number\": \"3000\",\n    \"city\": \"Santiago\",\n    \"is_default\": false\n  }]\n}\n</code></pre>"},{"location":"entities/commerce/#comercio-con-clasificaciones-complejas","title":"Comercio con Clasificaciones Complejas","text":"<pre><code>{\n  \"user_id\": \"COM_003\",\n  \"name\": \"Distribuidora Mayor\",\n  \"groups\": [{\n    \"group_type\": \"channel\",\n    \"attributes\": [{\n      \"key\": \"category\",\n      \"value\": \"wholesale\"\n    }]\n  }, {\n    \"group_type\": \"segment\",\n    \"attributes\": [{\n      \"key\": \"size\",\n      \"value\": \"large\"\n    }, {\n      \"key\": \"credit_score\",\n      \"value\": \"A+\"\n    }]\n  }, {\n    \"group_type\": \"territory\",\n    \"attributes\": [{\n      \"key\": \"zone\",\n      \"value\": \"north\"\n    }, {\n      \"key\": \"manager\",\n      \"value\": \"MANAGER_001\"\n    }]\n  }]\n}\n</code></pre>"},{"location":"entities/commerce/#notas-de-implementacion","title":"Notas de Implementaci\u00f3n","text":""},{"location":"entities/commerce/#gestion-de-cambios","title":"Gesti\u00f3n de Cambios","text":"<ol> <li>Actualizaci\u00f3n de Datos</li> <li><code>_updated_at</code> se actualiza autom\u00e1ticamente</li> <li>Los cambios en arrays deben mantener la integridad</li> <li> <p>Se debe mantener historial de cambios importantes</p> </li> <li> <p>Sincronizaci\u00f3n</p> </li> <li>Los cambios deben propagarse a sistemas integrados</li> <li>Se deben manejar conflictos de actualizaci\u00f3n</li> <li>Implementar mecanismos de retry para fallos</li> </ol>"},{"location":"entities/commerce/#consideraciones-de-seguridad","title":"Consideraciones de Seguridad","text":"<ol> <li>Datos Sensibles</li> <li>Informaci\u00f3n personal debe estar encriptada</li> <li>Acceso controlado a datos financieros</li> <li> <p>Logs de auditor\u00eda para cambios sensibles</p> </li> <li> <p>Compliance</p> </li> <li>Cumplimiento con regulaciones locales</li> <li>Manejo de consentimientos y permisos</li> <li>Retenci\u00f3n de datos seg\u00fan normativa</li> </ol>"},{"location":"entities/commerce/#optimizacion","title":"Optimizaci\u00f3n","text":"<ol> <li>Indexaci\u00f3n</li> <li>\u00cdndices en campos de b\u00fasqueda frecuente</li> <li>\u00cdndices compuestos para queries comunes</li> <li> <p>Optimizaci\u00f3n de b\u00fasqueda por geolocalizaci\u00f3n</p> </li> <li> <p>Cach\u00e9</p> </li> <li>Cacheo de datos frecuentemente accedidos</li> <li>Invalidaci\u00f3n selectiva de cach\u00e9</li> <li>Estrategias de precarga</li> </ol>"},{"location":"entities/commerce/#integracion-con-otros-sistemas","title":"Integraci\u00f3n con Otros Sistemas","text":""},{"location":"entities/commerce/#apis","title":"APIs","text":"<ol> <li> <p>Endpoints Principales <pre><code>GET    /api/v1/commerces/{user_id}\nPOST   /api/v1/commerces\nPUT    /api/v1/commerces/{user_id}\nPATCH  /api/v1/commerces/{user_id}\nDELETE /api/v1/commerces/{user_id}\n</code></pre></p> </li> <li> <p>Endpoints de Relaci\u00f3n <pre><code>GET    /api/v1/commerces/{user_id}/contacts\nGET    /api/v1/commerces/{user_id}/addresses\nGET    /api/v1/commerces/{user_id}/groups\n</code></pre></p> </li> </ol>"},{"location":"entities/commerce/#webhooks","title":"Webhooks","text":"<ol> <li>Eventos Disponibles</li> <li><code>commerce.created</code></li> <li><code>commerce.updated</code></li> <li><code>commerce.deleted</code></li> <li> <p><code>commerce.status_changed</code></p> </li> <li> <p>Formato de Payload <pre><code>{\n  \"event\": \"commerce.updated\",\n  \"timestamp\": \"2024-03-19T14:30:00Z\",\n  \"data\": {\n    \"user_id\": \"string\",\n    \"changes\": [{\n      \"field\": \"string\",\n      \"old_value\": \"any\",\n      \"new_value\": \"any\"\n    }]\n  }\n}\n</code></pre></p> </li> </ol>"},{"location":"entities/commerce/#preguntas-frecuentes","title":"Preguntas Frecuentes","text":"<ol> <li>\u00bfC\u00f3mo manejar m\u00faltiples nombres comerciales?</li> <li>Usar el campo <code>name</code> para el nombre principal</li> <li>Usar atributos para nombres alternativos</li> <li> <p>Mantener hist\u00f3rico de cambios de nombre</p> </li> <li> <p>\u00bfC\u00f3mo gestionar fusiones de comercios?</p> </li> <li>Mantener ambos registros activos</li> <li>Usar referencias cruzadas en <code>miscellaneous_id</code></li> <li> <p>Documentar la relaci\u00f3n en atributos</p> </li> <li> <p>\u00bfC\u00f3mo manejar diferentes zonas horarias?</p> </li> <li>Almacenar todas las fechas en UTC</li> <li>Incluir zona horaria en configuraci\u00f3n del comercio</li> <li>Convertir fechas en la capa de presentaci\u00f3n </li> </ol>"},{"location":"entities/coupon/","title":"Cupones","text":"<p>Los cupones representan los descuentos y promociones que pueden ser aplicados a las \u00f3rdenes en la plataforma Reten. Esta entidad almacena toda la informaci\u00f3n relevante sobre las condiciones, restricciones y beneficios de cada cup\u00f3n.</p>"},{"location":"entities/coupon/#estructura-de-datos","title":"Estructura de Datos","text":"<pre><code>{\n  // Identificadores\n  \"coupon_id\": \"string\",        // Identificador \u00fanico del cup\u00f3n (not null)\n  \"code\": \"string\",             // C\u00f3digo del cup\u00f3n para uso del cliente (not null)\n  \"external_id\": \"string\",      // Identificador externo del cliente\n\n  // Informaci\u00f3n b\u00e1sica\n  \"name\": {\n    \"display_name\": \"string\",    // Nombre para mostrar (not null)\n    \"description\": \"string\"      // Descripci\u00f3n del cup\u00f3n\n  },\n\n  // Beneficio del cup\u00f3n\n  \"benefit\": {\n    \"type\": \"string\",           // Tipo de beneficio (percentage, fixed_amount, free_shipping) (not null)\n    \"discount_value\": \"number\",  // Valor del descuento (not null)\n    \"minimum_purchase\": \"number\" // Monto m\u00ednimo de compra requerido\n  },\n\n  // Estado y vigencia\n  \"is_active\": \"boolean\",       // Estado activo del cup\u00f3n (not null)\n  \"validity\": {\n    \"start_date\": \"timestamp\",  // Fecha de inicio de vigencia (not null)\n    \"end_date\": \"timestamp\"     // Fecha de t\u00e9rmino de vigencia\n  },\n\n  // Restricciones de uso\n  \"usage_limits\": {\n    \"max_uses\": \"number\",       // N\u00famero m\u00e1ximo de usos totales\n    \"uses_per_user\": \"number\"   // N\u00famero m\u00e1ximo de usos por usuario\n  },\n\n  // Reglas de aplicaci\u00f3n\n  \"rules\": {\n    \"category_rules\": JSON,    // Reglas de categor\u00edas\n    \"time_rules\": JSON,        // Reglas de horarios\n    \"location_rules\": JSON,    // Reglas de ubicaci\u00f3n\n    \"product_rules\": JSON,     // Reglas de productos\n    \"combo_rules\": JSON,       // Reglas de combos\n    \"user_rules\": JSON,        // Reglas de usuarios\n    \"order_rules\": JSON,       // Reglas de \u00f3rdenes\n    \"custom_rules\": JSON       // Reglas personalizadas\n  },\n\n  // Marcas temporales\n  \"created_at\": \"timestamp\",    // Fecha de creaci\u00f3n (not null)\n  \"updated_at\": \"timestamp\",    // \u00daltima actualizaci\u00f3n (not null)\n  \"_created_at\": \"timestamp\",   // Fecha de creaci\u00f3n en BigQuery (not null)\n  \"_updated_at\": \"timestamp\"    // \u00daltima actualizaci\u00f3n en BigQuery (not null)\n}\n</code></pre>"},{"location":"entities/coupon/#tipos-de-beneficio","title":"Tipos de Beneficio","text":"<p>Los tipos de beneficio disponibles son:</p> <ul> <li><code>percentage</code>: Descuento porcentual sobre el monto</li> <li><code>fixed_amount</code>: Descuento de monto fijo</li> <li><code>free_shipping</code>: Env\u00edo gratis</li> <li><code>fixed_price</code>: Precio fijo especial</li> </ul>"},{"location":"entities/coupon/#formato-de-reglas","title":"Formato de Reglas","text":"<p>Cada tipo de regla se almacena como un campo de tipo <code>JSON</code> en la base de datos, lo que permite una estructura flexible y consultas eficientes:</p>"},{"location":"entities/coupon/#reglas-de-categoria","title":"Reglas de Categor\u00eda","text":"<pre><code>{\n  \"included_categories\": [\"category_1\", \"category_2\"],\n  \"excluded_categories\": [\"category_3\"]\n}\n</code></pre>"},{"location":"entities/coupon/#reglas-de-tiempo","title":"Reglas de Tiempo","text":"<pre><code>{\n  \"days\": [\"MONDAY\", \"TUESDAY\"],\n  \"start_time\": \"09:00\",\n  \"end_time\": \"18:00\"\n}\n</code></pre>"},{"location":"entities/coupon/#reglas-de-ubicacion","title":"Reglas de Ubicaci\u00f3n","text":"<pre><code>{\n  \"territories\": [\"SANTIAGO\", \"VALPARAISO\"],\n  \"excluded_territories\": [\"PUNTA_ARENAS\"]\n}\n</code></pre>"},{"location":"entities/coupon/#reglas-de-producto","title":"Reglas de Producto","text":"<pre><code>{\n  \"included_products\": [\"SKU1\", \"SKU2\"],\n  \"excluded_products\": [\"SKU3\"],\n  \"min_quantity\": 2\n}\n</code></pre>"},{"location":"entities/coupon/#reglas-de-combo","title":"Reglas de Combo","text":"<pre><code>{\n  \"required_combinations\": [{\n    \"products\": [\"SKU1\", \"SKU2\"],\n    \"quantity\": 1\n  }]\n}\n</code></pre>"},{"location":"entities/coupon/#reglas-de-usuario","title":"Reglas de Usuario","text":"<pre><code>{\n  \"customer_types\": [\"NEW\", \"PREMIUM\"],\n  \"excluded_users\": [\"USER1\", \"USER2\"]\n}\n</code></pre>"},{"location":"entities/coupon/#reglas-de-orden","title":"Reglas de Orden","text":"<pre><code>{\n  \"min_items\": 2,\n  \"payment_methods\": [\"CREDIT_CARD\", \"DEBIT_CARD\"]\n}\n</code></pre>"},{"location":"entities/coupon/#ejemplo-de-uso-en-sql","title":"Ejemplo de Uso en SQL","text":"<pre><code>-- Crear tabla con campos JSON\nCREATE TABLE cupones (\n  id STRING,\n  code STRING,\n  rules STRUCT&lt;\n    category_rules JSON,\n    time_rules JSON,\n    location_rules JSON,\n    product_rules JSON,\n    combo_rules JSON,\n    user_rules JSON,\n    order_rules JSON,\n    custom_rules JSON\n  &gt;\n);\n\n-- Insertar un cup\u00f3n con reglas\nINSERT INTO cupones (id, code, rules)\nVALUES (\n  'COUPON1',\n  'WELCOME20',\n  STRUCT(\n    JSON '{\"included_categories\": [\"ELECTRONICS\"]}',\n    JSON '{\"days\": [\"MONDAY\", \"TUESDAY\"]}',\n    NULL,\n    NULL,\n    NULL,\n    NULL,\n    NULL,\n    NULL\n  )\n);\n\n-- Consultar cupones por categor\u00eda\nSELECT id, code\nFROM cupones\nWHERE JSON_VALUE(rules.category_rules, '$.included_categories[0]') = 'ELECTRONICS';\n\n-- Actualizar reglas de tiempo\nUPDATE cupones\nSET rules.time_rules = JSON '{\"days\": [\"MONDAY\", \"TUESDAY\", \"WEDNESDAY\"]}'\nWHERE id = 'COUPON1';\n</code></pre>"},{"location":"entities/coupon/#campos-detallados","title":"Campos Detallados","text":""},{"location":"entities/coupon/#identificadores","title":"Identificadores","text":"Campo Tipo Requerido Descripci\u00f3n coupon_id string S\u00ed Identificador \u00fanico del cup\u00f3n code string S\u00ed C\u00f3digo para redenci\u00f3n del cup\u00f3n data_object_id string S\u00ed ID del objeto de datos"},{"location":"entities/coupon/#informacion-basica","title":"Informaci\u00f3n B\u00e1sica","text":"Campo Tipo Requerido Descripci\u00f3n display_name string S\u00ed Nombre para mostrar description string No Descripci\u00f3n del cup\u00f3n <p>Estados V\u00e1lidos del Cup\u00f3n: - <code>active</code>: Cup\u00f3n activo y disponible - <code>inactive</code>: Cup\u00f3n temporalmente desactivado - <code>expired</code>: Cup\u00f3n expirado - <code>depleted</code>: Cup\u00f3n sin usos disponibles</p>"},{"location":"entities/coupon/#beneficios","title":"Beneficios","text":"Campo Tipo Descripci\u00f3n type string Tipo de beneficio discount_value number Valor del descuento minimum_purchase number Monto m\u00ednimo de compra requerido <p>Tipos de Beneficio: - <code>percentage</code>: Descuento porcentual - <code>fixed_amount</code>: Descuento de monto fijo - <code>free_shipping</code>: Env\u00edo gratis - <code>fixed_price</code>: Precio fijo especial</p>"},{"location":"entities/coupon/#validaciones","title":"Validaciones","text":""},{"location":"entities/coupon/#validaciones-generales","title":"Validaciones Generales","text":"<ol> <li>Identificadores</li> <li><code>coupon_id</code> debe ser \u00fanico en todo el sistema</li> <li><code>code</code> debe ser \u00fanico y alfanum\u00e9rico</li> <li> <p><code>code</code> debe ser f\u00e1cil de recordar y usar</p> </li> <li> <p>Vigencia</p> </li> <li><code>start_date</code> debe ser anterior a <code>end_date</code></li> <li>Fechas deben estar en formato ISO 8601</li> <li> <p>Zona horaria debe ser v\u00e1lida</p> </li> <li> <p>L\u00edmites de Uso</p> </li> <li><code>max_uses</code> debe ser mayor a cero</li> <li><code>uses_per_user</code> debe ser menor o igual a <code>max_uses</code></li> <li><code>minimum_purchase</code> debe ser mayor a cero</li> </ol>"},{"location":"entities/coupon/#validaciones-de-negocio","title":"Validaciones de Negocio","text":"<ol> <li>Beneficios</li> <li>Porcentajes deben estar entre 0 y 100</li> <li>Montos fijos deben ser positivos</li> <li> <p>Moneda debe ser v\u00e1lida</p> </li> <li> <p>Condiciones</p> </li> <li>M\u00e9todos de pago deben existir</li> <li>Territorios deben ser v\u00e1lidos</li> <li>Horarios deben ser coherentes</li> </ol>"},{"location":"entities/coupon/#ejemplos-de-uso","title":"Ejemplos de Uso","text":""},{"location":"entities/coupon/#cupon-de-descuento-porcentual","title":"Cup\u00f3n de Descuento Porcentual","text":"<pre><code>{\n  \"coupon_id\": \"COUPON_001\",\n  \"code\": \"WELCOME20\",\n  \"name\": {\n    \"display_name\": \"20% de Descuento Bienvenida\",\n    \"description\": \"Descuento de bienvenida para nuevos clientes\"\n  },\n  \"is_active\": true,\n  \"validity\": {\n    \"start_date\": \"2024-03-01T00:00:00Z\",\n    \"end_date\": \"2024-12-31T23:59:59Z\"\n  },\n  \"usage_limits\": {\n    \"max_uses\": 1000,\n    \"uses_per_user\": 1\n  },\n  \"benefit\": {\n    \"type\": \"percentage\",\n    \"discount_value\": 20,\n    \"minimum_purchase\": 20000\n  },\n  \"rules\": {\n    \"category_rules\": \"new_customers\"\n  }\n}\n</code></pre>"},{"location":"entities/coupon/#cupon-de-envio-gratis","title":"Cup\u00f3n de Env\u00edo Gratis","text":"<pre><code>{\n  \"coupon_id\": \"COUPON_002\",\n  \"code\": \"FREESHIP\",\n  \"name\": {\n    \"display_name\": \"Env\u00edo Gratis en tu Primera Compra\",\n    \"description\": \"Env\u00edo gratis en pedidos superiores a $30.000\"\n  },\n  \"benefit\": {\n    \"type\": \"free_shipping\",\n    \"minimum_purchase\": 30000\n  },\n  \"usage_limits\": {\n    \"max_uses\": 1000,\n    \"uses_per_user\": 1\n  },\n  \"rules\": {\n    \"location_rules\": \"first_purchase\"\n  }\n}\n</code></pre>"},{"location":"entities/coupon/#cupon-para-productos-especificos","title":"Cup\u00f3n para Productos Espec\u00edficos","text":"<pre><code>{\n  \"coupon_id\": \"COUPON_003\",\n  \"code\": \"PAINT25\",\n  \"name\": {\n    \"display_name\": \"25% en Pinturas Premium\",\n    \"description\": \"Descuento exclusivo en l\u00ednea de pinturas premium\"\n  },\n  \"benefit\": {\n    \"type\": \"percentage\",\n    \"discount_value\": 25,\n    \"minimum_purchase\": 25000\n  },\n  \"rules\": {\n    \"product_rules\": \"premium_paints\"\n  }\n}\n</code></pre>"},{"location":"entities/coupon/#notas-de-implementacion","title":"Notas de Implementaci\u00f3n","text":""},{"location":"entities/coupon/#gestion-de-redenciones","title":"Gesti\u00f3n de Redenciones","text":"<ol> <li>Validaci\u00f3n en Tiempo Real</li> <li>Verificar vigencia</li> <li>Validar l\u00edmites de uso</li> <li> <p>Comprobar condiciones</p> </li> <li> <p>Registro de Uso</p> </li> <li>Actualizar contadores</li> <li>Registrar usuario y orden</li> <li>Mantener historial</li> </ol>"},{"location":"entities/coupon/#optimizacion","title":"Optimizaci\u00f3n","text":"<ol> <li>Cach\u00e9</li> <li>Cachear cupones activos</li> <li>Invalidar al actualizar</li> <li> <p>Precalcular elegibilidad</p> </li> <li> <p>B\u00fasqueda</p> </li> <li>\u00cdndices por c\u00f3digo</li> <li>B\u00fasqueda por condiciones</li> <li>Filtros de vigencia</li> </ol>"},{"location":"entities/coupon/#integracion-con-otros-sistemas","title":"Integraci\u00f3n con Otros Sistemas","text":""},{"location":"entities/coupon/#apis","title":"APIs","text":"<ol> <li> <p>Endpoints Principales <pre><code>GET    /api/v1/coupons/{coupon_id}\nPOST   /api/v1/coupons\nPUT    /api/v1/coupons/{coupon_id}\nPATCH  /api/v1/coupons/{coupon_id}\nDELETE /api/v1/coupons/{coupon_id}\n</code></pre></p> </li> <li> <p>Endpoints de Validaci\u00f3n <pre><code>POST   /api/v1/coupons/validate\nGET    /api/v1/coupons/{code}/check\nPOST   /api/v1/coupons/{code}/apply\n</code></pre></p> </li> </ol>"},{"location":"entities/coupon/#webhooks","title":"Webhooks","text":"<ol> <li>Eventos Disponibles</li> <li><code>coupon.created</code></li> <li><code>coupon.updated</code></li> <li><code>coupon.status_changed</code></li> <li><code>coupon.redeemed</code></li> <li> <p><code>coupon.depleted</code></p> </li> <li> <p>Formato de Payload <pre><code>{\n  \"event\": \"coupon.redeemed\",\n  \"timestamp\": \"2024-03-19T14:30:00Z\",\n  \"data\": {\n    \"coupon_id\": \"string\",\n    \"code\": \"string\",\n    \"order_id\": \"string\",\n    \"user_id\": \"string\",\n    \"discount_amount\": \"number\"\n  }\n}\n</code></pre></p> </li> </ol>"},{"location":"entities/coupon/#preguntas-frecuentes","title":"Preguntas Frecuentes","text":"<ol> <li>\u00bfC\u00f3mo manejar cupones expirados?</li> <li>Mantener registro hist\u00f3rico</li> <li>Notificar a usuarios afectados</li> <li> <p>Sugerir alternativas v\u00e1lidas</p> </li> <li> <p>\u00bfC\u00f3mo gestionar conflictos entre cupones?</p> </li> <li>Definir reglas de precedencia</li> <li>Establecer compatibilidad</li> <li> <p>Mostrar mejor opci\u00f3n al usuario</p> </li> <li> <p>\u00bfC\u00f3mo prevenir el abuso de cupones?</p> </li> <li>Validar l\u00edmites estrictamente</li> <li>Implementar detecci\u00f3n de fraude</li> <li>Monitorear patrones de uso </li> </ol>"},{"location":"entities/product/","title":"Productos","text":"<p>Los productos representan los art\u00edculos comercializados a trav\u00e9s de la plataforma Reten. Esta entidad almacena toda la informaci\u00f3n relevante sobre los productos, sus caracter\u00edsticas, categorizaci\u00f3n y relaciones comerciales.</p>"},{"location":"entities/product/#estructura-de-datos","title":"Estructura de Datos","text":"<pre><code>{\n  // Identificadores\n  \"product_id\": \"string\",        // Identificador \u00fanico del producto (not null)\n  \"sku\": \"string\",              // Stock Keeping Unit, c\u00f3digo \u00fanico de producto para gesti\u00f3n de inventario (not null)\n  \"gtin\": \"string\",             // Global Trade Item Number (c\u00f3digo de barras)\n\n  // Informaci\u00f3n b\u00e1sica\n  \"name\": {\n    \"display_name\": \"string\",    // Nombre comercial del producto (not null)\n    \"short_name\": \"string\",      // Nombre corto para listados\n    \"slug\": \"string\",           // Versi\u00f3n URL-friendly del nombre\n    \"short_description\": \"string\", // Descripci\u00f3n corta del producto\n    \"description\": \"string\"      // Descripci\u00f3n detallada del producto\n  },\n\n  // Marcas temporales\n  \"created_at\": \"timestamp\",    // Fecha de creaci\u00f3n del producto (not null)\n  \"updated_at\": \"timestamp\",    // \u00daltima actualizaci\u00f3n del producto (not null)\n  \"_created_at\": \"timestamp\",   // Fecha de creaci\u00f3n del registro en BigQuery (not null)\n  \"_updated_at\": \"timestamp\",   // \u00daltima actualizaci\u00f3n del registro en BigQuery (not null)\n\n  // Im\u00e1genes\n  \"images\": {\n    \"main_image_url\": \"string\",\n    \"thumbnail_url\": \"string\",\n    \"additional_images\": [{\n      \"url\": \"string\",\n      \"description\": \"string\",\n      \"type\": \"string\",\n      \"position\": \"number\",\n      \"alt_text\": \"string\"\n    }]\n  },\n\n  // Categorizaci\u00f3n\n  \"categorization\": {\n    \"category\": \"string\",\n    \"subcategories\": [\"string\"],\n    \"tags\": [\"string\"],\n    \"brand\": \"string\",\n    \"collection\": \"string\"\n  },\n\n  // Caracter\u00edsticas f\u00edsicas\n  \"physical\": {\n    \"weight\": {\n      \"value\": \"number\",\n      \"unit\": \"string\"\n    },\n    \"dimensions\": {\n      \"length\": \"number\",\n      \"width\": \"number\",\n      \"height\": \"number\",\n      \"unit\": \"string\"\n    },\n    \"color\": [\"string\"],\n    \"size\": \"string\",\n    \"materials\": [\"string\"]\n  },\n\n  // Composici\u00f3n\n  \"composition\": {\n    \"is_pack\": \"boolean\",\n    \"pack_details\": {\n      \"units_per_pack\": \"number\",\n      \"unit_type\": \"string\",\n      \"unit_size\": \"number\",\n      \"unit_measure\": \"string\"\n    },\n    \"is_combo\": \"boolean\",\n    \"combo_details\": {\n      \"combo_type\": \"string\",\n      \"components\": [{\n        \"sku\": \"string\",\n        \"product_id\": \"string\",\n        \"quantity\": \"number\",\n        \"is_required\": \"boolean\",\n        \"component_type\": \"string\"\n      }],\n      \"is_configurable\": \"boolean\"\n    },\n    \"display_unit\": \"string\"\n  },\n\n  // Informaci\u00f3n comercial\n  \"commercial\": {\n    \"base_price\": \"number\",\n    \"currency\": \"string\",\n    \"unit_of_measure\": \"string\"\n  },\n\n  // Atributos flexibles\n  \"flexible_attributes\": {\n    \"attributes\": [{\n      \"key\": \"string\",\n      \"value\": \"string\",\n      \"type\": \"string\",\n      \"unit\": \"string\",\n      \"group\": \"string\"\n    }]\n  }\n}\n</code></pre>"},{"location":"entities/product/#campos-detallados","title":"Campos Detallados","text":""},{"location":"entities/product/#identificadores","title":"Identificadores","text":"Campo Tipo Requerido Descripci\u00f3n product_id string S\u00ed Identificador \u00fanico del producto sku string S\u00ed Stock Keeping Unit, c\u00f3digo \u00fanico para gesti\u00f3n de inventario gtin string No Global Trade Item Number (c\u00f3digo de barras)"},{"location":"entities/product/#informacion-basica","title":"Informaci\u00f3n B\u00e1sica","text":"Campo Tipo Requerido Descripci\u00f3n display_name string S\u00ed Nombre comercial del producto short_name string No Nombre corto para listados slug string No Versi\u00f3n URL-friendly del nombre short_description string No Descripci\u00f3n corta para listados y previews description string No Descripci\u00f3n detallada del producto"},{"location":"entities/product/#imagenes","title":"Im\u00e1genes","text":"Campo Tipo Descripci\u00f3n main_image_url string URL de la imagen principal thumbnail_url string URL de la miniatura additional_images array Colecci\u00f3n de im\u00e1genes adicionales <p>Estructura de Im\u00e1genes Adicionales: - <code>url</code>: URL de la imagen - <code>description</code>: Descripci\u00f3n de la imagen - <code>type</code>: Tipo de imagen (producto, lifestyle, etc.) - <code>position</code>: Orden de visualizaci\u00f3n - <code>alt_text</code>: Texto alternativo para accesibilidad</p>"},{"location":"entities/product/#categorizacion","title":"Categorizaci\u00f3n","text":"Campo Tipo Descripci\u00f3n category string Categor\u00eda principal subcategories array Lista de subcategor\u00edas tags array Etiquetas para b\u00fasqueda y filtrado brand string Marca del producto collection string Colecci\u00f3n o l\u00ednea de productos"},{"location":"entities/product/#composicion","title":"Composici\u00f3n","text":"<p>Pack: - <code>is_pack</code>: Indica si es un pack - <code>units_per_pack</code>: Cantidad de unidades por pack - <code>unit_type</code>: Tipo de unidad - <code>unit_size</code>: Tama\u00f1o de la unidad - <code>unit_measure</code>: Unidad de medida</p> <p>Combo: - <code>is_combo</code>: Indica si es un combo - <code>combo_type</code>: Tipo de combo - <code>is_configurable</code>: Permite configuraci\u00f3n - <code>components</code>: Lista de productos que componen el combo</p>"},{"location":"entities/product/#validaciones","title":"Validaciones","text":""},{"location":"entities/product/#validaciones-generales","title":"Validaciones Generales","text":"<ol> <li>Identificadores</li> <li><code>product_id</code> debe ser \u00fanico en todo el sistema</li> <li><code>sku</code> debe ser \u00fanico por cliente</li> <li> <p><code>gtin</code> debe ser v\u00e1lido seg\u00fan est\u00e1ndar GS1</p> </li> <li> <p>Informaci\u00f3n B\u00e1sica</p> </li> <li><code>name</code> no puede estar vac\u00edo</li> <li><code>slug</code> debe ser \u00fanico y URL-friendly</li> <li> <p>Descripciones no deben exceder l\u00edmites de caracteres</p> </li> <li> <p>Im\u00e1genes</p> </li> <li>URLs deben ser v\u00e1lidas y accesibles</li> <li>Posiciones deben ser \u00fanicas</li> <li>Tipos de imagen deben ser v\u00e1lidos</li> </ol>"},{"location":"entities/product/#validaciones-de-negocio","title":"Validaciones de Negocio","text":"<ol> <li>Composici\u00f3n</li> <li>Si <code>is_pack</code> es true, <code>pack_details</code> debe estar completo</li> <li>Si <code>is_combo</code> es true, <code>combo_details</code> debe estar completo</li> <li> <p>Componentes deben existir en el cat\u00e1logo</p> </li> <li> <p>Categorizaci\u00f3n</p> </li> <li>Categor\u00edas deben existir en el maestro</li> <li>Tags deben ser v\u00e1lidos</li> <li>Marca debe existir en el maestro</li> </ol>"},{"location":"entities/product/#ejemplos-de-uso","title":"Ejemplos de Uso","text":""},{"location":"entities/product/#producto-simple","title":"Producto Simple","text":"<pre><code>{\n  \"product_id\": \"PROD_001\",\n  \"sku\": \"SKU123\",\n  \"name\": {\n    \"display_name\": \"Pintura L\u00e1tex Premium\",\n    \"short_name\": \"L\u00e1tex Premium\",\n    \"slug\": \"pintura-latex-premium\",\n    \"short_description\": \"Pintura l\u00e1tex de alta calidad\"\n  },\n  \"images\": {\n    \"main_image_url\": \"https://example.com/images/main.jpg\",\n    \"thumbnail_url\": \"https://example.com/images/thumb.jpg\"\n  },\n  \"categorization\": {\n    \"category\": \"Pinturas\",\n    \"subcategories\": [\"Interior\", \"L\u00e1tex\"],\n    \"brand\": \"Premium Paints\"\n  },\n  \"commercial\": {\n    \"base_price\": 15000,\n    \"currency\": \"CLP\",\n    \"unit_of_measure\": \"gal\u00f3n\"\n  }\n}\n</code></pre>"},{"location":"entities/product/#producto-pack","title":"Producto Pack","text":"<pre><code>{\n  \"product_id\": \"PROD_002\",\n  \"sku\": \"PACK456\",\n  \"name\": {\n    \"display_name\": \"Pack Pintura Interior\",\n    \"short_name\": \"Pack Pintura\",\n    \"slug\": \"pack-pintura-interior\",\n    \"short_description\": \"Pack de pinturas para interiores\"\n  },\n  \"composition\": {\n    \"is_pack\": true,\n    \"pack_details\": {\n      \"units_per_pack\": 4,\n      \"unit_type\": \"gal\u00f3n\",\n      \"unit_size\": 1,\n      \"unit_measure\": \"gal\u00f3n\"\n    },\n    \"display_unit\": \"pack\"\n  },\n  \"commercial\": {\n    \"base_price\": 50000,\n    \"currency\": \"CLP\",\n    \"unit_of_measure\": \"pack\"\n  }\n}\n</code></pre>"},{"location":"entities/product/#producto-con-atributos-flexibles","title":"Producto con Atributos Flexibles","text":"<pre><code>{\n  \"product_id\": \"PROD_003\",\n  \"sku\": \"SKU789\",\n  \"name\": {\n    \"display_name\": \"Pintura Especializada\",\n    \"short_name\": \"Pintura Especial\",\n    \"slug\": \"pintura-especializada\",\n    \"short_description\": \"Pintura de alta calidad para aplicaciones especiales\"\n  },\n  \"flexible_attributes\": {\n    \"attributes\": [{\n      \"key\": \"rendimiento\",\n      \"value\": \"12\",\n      \"type\": \"number\",\n      \"unit\": \"m2/l\",\n      \"group\": \"technical\"\n    }, {\n      \"key\": \"tiempo_secado\",\n      \"value\": \"2\",\n      \"type\": \"number\",\n      \"unit\": \"horas\",\n      \"group\": \"application\"\n    }]\n  }\n}\n</code></pre>"},{"location":"entities/product/#notas-de-implementacion","title":"Notas de Implementaci\u00f3n","text":""},{"location":"entities/product/#gestion-de-inventario","title":"Gesti\u00f3n de Inventario","text":"<ol> <li>Control de Stock</li> <li>Actualizaci\u00f3n en tiempo real</li> <li>Reserva de inventario</li> <li> <p>Alertas de stock bajo</p> </li> <li> <p>Precios y Promociones</p> </li> <li>Historial de precios</li> <li>Reglas de descuento</li> <li>Precios por volumen</li> </ol>"},{"location":"entities/product/#optimizacion","title":"Optimizaci\u00f3n","text":"<ol> <li>B\u00fasqueda y Filtrado</li> <li>\u00cdndices por categor\u00eda</li> <li>B\u00fasqueda por atributos</li> <li> <p>Filtros din\u00e1micos</p> </li> <li> <p>Cach\u00e9</p> </li> <li>Informaci\u00f3n b\u00e1sica en cach\u00e9</li> <li>Invalidaci\u00f3n selectiva</li> <li>Precarga de im\u00e1genes</li> </ol>"},{"location":"entities/product/#integracion-con-otros-sistemas","title":"Integraci\u00f3n con Otros Sistemas","text":""},{"location":"entities/product/#apis","title":"APIs","text":"<ol> <li> <p>Endpoints Principales <pre><code>GET    /api/v1/products/{product_id}\nPOST   /api/v1/products\nPUT    /api/v1/products/{product_id}\nPATCH  /api/v1/products/{product_id}\nDELETE /api/v1/products/{product_id}\n</code></pre></p> </li> <li> <p>Endpoints de Relaci\u00f3n <pre><code>GET    /api/v1/products/{product_id}/categories\nGET    /api/v1/products/{product_id}/media\nGET    /api/v1/products/{product_id}/related\n</code></pre></p> </li> </ol>"},{"location":"entities/product/#webhooks","title":"Webhooks","text":"<ol> <li>Eventos Disponibles</li> <li><code>product.created</code></li> <li><code>product.updated</code></li> <li><code>product.status_changed</code></li> <li> <p><code>product.stock_updated</code></p> </li> <li> <p>Formato de Payload <pre><code>{\n  \"event\": \"product.stock_updated\",\n  \"timestamp\": \"2024-03-19T14:30:00Z\",\n  \"data\": {\n    \"product_id\": \"string\",\n    \"changes\": [{\n      \"field\": \"stock_level\",\n      \"old_value\": 100,\n      \"new_value\": 95\n    }]\n  }\n}\n</code></pre></p> </li> </ol>"},{"location":"entities/product/#preguntas-frecuentes","title":"Preguntas Frecuentes","text":"<ol> <li>\u00bfC\u00f3mo manejar variantes de productos?</li> <li>Usar productos relacionados</li> <li>Mantener atributos espec\u00edficos</li> <li> <p>Vincular SKUs relacionados</p> </li> <li> <p>\u00bfC\u00f3mo gestionar cambios de precio?</p> </li> <li>Mantener historial de precios</li> <li>Programar cambios futuros</li> <li> <p>Notificar a stakeholders</p> </li> <li> <p>\u00bfC\u00f3mo manejar productos descontinuados?</p> </li> <li>Mantener registro hist\u00f3rico</li> <li>Sugerir alternativas</li> <li>Gestionar inventario remanente </li> </ol>"},{"location":"entities/seller/","title":"Vendedores","text":"<p>Los vendedores son los usuarios del CPG (Consumer Packaged Goods) que interact\u00faan con la plataforma Reten. Esta entidad almacena toda la informaci\u00f3n relevante sobre los usuarios, sus roles, permisos y relaciones con comercios.</p>"},{"location":"entities/seller/#estructura-de-datos","title":"Estructura de Datos","text":"<pre><code>{\n  // Identificadores\n  \"seller_id\": \"string\",         // Identificador principal (not null)\n  \"external_id\": \"string\",       // Identificador externo del cliente\n  \"employee_id\": \"string\",       // Identificador de empleado en CPG\n\n  // Informaci\u00f3n b\u00e1sica\n  \"name\": {\n    \"first_name\": \"string\",      // Nombre (not null)\n    \"last_name\": \"string\",       // Apellido (not null)\n    \"display_name\": \"string\",    // Nombre para mostrar\n    \"full_name\": \"string\"        // Nombre completo (not null)\n  },\n  \"status\": \"string\",            // Estado del vendedor (active, inactive, suspended)\n  \"is_active\": \"boolean\",        // Indicador de estado activo\n\n  // Marcas temporales\n  \"created_at\": \"timestamp\",     // Fecha de creaci\u00f3n en sistema cliente (not null)\n  \"updated_at\": \"timestamp\",     // Fecha de \u00faltima actualizaci\u00f3n en sistema cliente\n  \"_created_at\": \"timestamp\",    // Fecha de creaci\u00f3n en Reten\n  \"_updated_at\": \"timestamp\",    // Fecha de \u00faltima actualizaci\u00f3n en Reten\n  \"hire_date\": \"timestamp\",      // Fecha de contrataci\u00f3n (not null)\n  \"termination_date\": \"timestamp\", // Fecha de t\u00e9rmino si aplica\n\n  // Informaci\u00f3n de contacto\n  \"contacts\": [{\n    \"email\": \"string\",           // Email corporativo o personal\n    \"phone\": \"string\",           // N\u00famero telef\u00f3nico\n    \"type\": \"string\",            // Tipo de contacto (work, personal)\n    \"is_primary\": \"boolean\"      // Indica si es el contacto principal\n  }],\n\n  // Informaci\u00f3n de acceso\n  \"access\": {\n    \"username\": \"string\",        // Nombre de usuario (not null)\n    \"role\": \"string\",            // Rol principal (not null)\n    \"permissions\": [\"string\"],   // Lista de permisos espec\u00edficos\n    \"last_login\": \"timestamp\",   // \u00daltimo acceso\n    \"requires_2fa\": \"boolean\",   // Requiere autenticaci\u00f3n de dos factores\n    \"status\": \"string\"          // Estado de la cuenta (active, locked, etc.)\n  },\n\n  // Asignaciones y territorios\n  \"assignments\": [{\n    \"type\": \"string\",           // Tipo de asignaci\u00f3n (territory, route, etc.)\n    \"code\": \"string\",           // C\u00f3digo de identificaci\u00f3n\n    \"name\": \"string\",           // Nombre descriptivo\n    \"start_date\": \"timestamp\",  // Fecha de inicio\n    \"end_date\": \"timestamp\",    // Fecha de t\u00e9rmino si aplica\n    \"is_active\": \"boolean\"      // Estado actual de la asignaci\u00f3n\n  }],\n\n  // Ubicaci\u00f3n\n  \"location\": {\n    \"id\": \"string\",             // ID de la ubicaci\u00f3n\n    \"name\": \"string\"            // Nombre de la ubicaci\u00f3n\n  },\n\n  // Jerarqu\u00eda organizacional\n  \"organization\": {\n    \"department\": \"string\",     // Departamento\n    \"position\": \"string\",       // Cargo\n    \"level\": \"string\",         // Nivel jer\u00e1rquico\n    \"supervisor\": {\n      \"id\": \"string\",          // ID del supervisor directo\n      \"name\": \"string\"         // Nombre del supervisor\n    },\n    \"cost_center\": \"string\"    // Centro de costo\n  },\n\n  // Metas y KPIs\n  \"targets\": [{\n    \"period\": \"string\",        // Periodo (monthly, quarterly, yearly)\n    \"type\": \"string\",         // Tipo de meta\n    \"value\": \"number\",        // Valor objetivo\n    \"unit\": \"string\",         // Unidad de medida\n    \"progress\": \"number\"      // Progreso actual\n  }],\n\n  // Atributos personalizados\n  \"attributes\": [{\n    \"key\": \"string\",\n    \"value\": \"string\"\n  }],\n\n  // Relaciones Comerciales\n  \"commerce_relationships\": [{\n    \"commerce_id\": \"string\",      // ID del comercio\n    \"relationship_type\": \"string\", // Tipo de relaci\u00f3n (primary, secondary, temporary)\n    \"start_date\": \"timestamp\",    // Fecha de inicio de la relaci\u00f3n\n    \"end_date\": \"timestamp\",      // Fecha de t\u00e9rmino (si aplica)\n    \"is_active\": \"boolean\",       // Estado actual de la relaci\u00f3n\n    \"assignment_type\": \"string\",  // Tipo de asignaci\u00f3n (direct, inherited, temporary)\n    \"attributes\": [{              // Atributos espec\u00edficos de la relaci\u00f3n\n      \"key\": \"string\",\n      \"value\": \"string\"\n    }]\n  }]\n}\n</code></pre>"},{"location":"entities/seller/#campos-detallados","title":"Campos Detallados","text":""},{"location":"entities/seller/#identificadores","title":"Identificadores","text":"Campo Tipo Requerido Descripci\u00f3n seller_id string S\u00ed Identificador \u00fanico en Reten external_id string No Identificador en el sistema del cliente employee_id string No N\u00famero de empleado en CPG"},{"location":"entities/seller/#informacion-basica","title":"Informaci\u00f3n B\u00e1sica","text":"Campo Tipo Requerido Descripci\u00f3n first_name string S\u00ed Nombre del vendedor last_name string S\u00ed Apellido del vendedor display_name string No Nombre para mostrar en sistema status string S\u00ed Estado actual del vendedor <p>Estados V\u00e1lidos del Vendedor: - <code>active</code>: Vendedor activo - <code>inactive</code>: Vendedor inactivo temporalmente - <code>suspended</code>: Cuenta suspendida - <code>terminated</code>: Relaci\u00f3n terminada</p>"},{"location":"entities/seller/#informacion-de-acceso","title":"Informaci\u00f3n de Acceso","text":"Campo Tipo Requerido Descripci\u00f3n username string S\u00ed Nombre de usuario para acceso role string S\u00ed Rol principal asignado permissions array No Permisos espec\u00edficos adicionales requires_2fa boolean No Autenticaci\u00f3n de dos factores last_login timestamp No \u00daltimo acceso al sistema <p>Roles Comunes: - <code>sales_rep</code>: Vendedor de campo - <code>supervisor</code>: Supervisor de ventas - <code>manager</code>: Gerente de territorio - <code>admin</code>: Administrador de sistema - <code>analyst</code>: Analista de ventas</p>"},{"location":"entities/seller/#asignaciones-y-territorios","title":"Asignaciones y Territorios","text":"<p>Las asignaciones definen las \u00e1reas de responsabilidad del vendedor:</p> Campo Tipo Descripci\u00f3n type string Tipo de asignaci\u00f3n code string C\u00f3digo identificador name string Nombre descriptivo start_date timestamp Inicio de la asignaci\u00f3n end_date timestamp T\u00e9rmino de la asignaci\u00f3n is_active boolean Estado actual <p>Tipos de Asignaci\u00f3n: - <code>territory</code>: Territorio geogr\u00e1fico - <code>route</code>: Ruta de visita - <code>portfolio</code>: Portafolio de productos - <code>channel</code>: Canal de ventas - <code>segment</code>: Segmento de clientes</p>"},{"location":"entities/seller/#relaciones-comerciales","title":"Relaciones Comerciales","text":"<p>Los vendedores pueden tener m\u00faltiples comercios asociados, y esta relaci\u00f3n se gestiona a trav\u00e9s de la siguiente estructura:</p> <pre><code>{\n  // ... otros campos del vendedor ...\n\n  \"commerce_relationships\": [{\n    \"commerce_id\": \"string\",      // ID del comercio\n    \"relationship_type\": \"string\", // Tipo de relaci\u00f3n (primary, secondary, temporary)\n    \"start_date\": \"timestamp\",    // Fecha de inicio de la relaci\u00f3n\n    \"end_date\": \"timestamp\",      // Fecha de t\u00e9rmino (si aplica)\n    \"is_active\": \"boolean\",       // Estado actual de la relaci\u00f3n\n    \"assignment_type\": \"string\",  // Tipo de asignaci\u00f3n (direct, inherited, temporary)\n    \"attributes\": [{              // Atributos espec\u00edficos de la relaci\u00f3n\n      \"key\": \"string\",\n      \"value\": \"string\"\n    }]\n  }]\n}\n</code></pre>"},{"location":"entities/seller/#campos-de-relacion-comercial","title":"Campos de Relaci\u00f3n Comercial","text":"Campo Tipo Requerido Descripci\u00f3n commerce_id string S\u00ed Identificador \u00fanico del comercio relationship_type string S\u00ed Tipo de relaci\u00f3n con el comercio start_date timestamp S\u00ed Inicio de la relaci\u00f3n end_date timestamp No T\u00e9rmino de la relaci\u00f3n is_active boolean S\u00ed Indica si la relaci\u00f3n est\u00e1 activa assignment_type string S\u00ed C\u00f3mo fue asignado el comercio al vendedor"},{"location":"entities/seller/#tipos-de-relacion","title":"Tipos de Relaci\u00f3n","text":"<ul> <li><code>primary</code>: Vendedor principal responsable del comercio</li> <li><code>secondary</code>: Vendedor de apoyo o respaldo</li> <li><code>temporary</code>: Asignaci\u00f3n temporal (ej: cubrir vacaciones)</li> </ul>"},{"location":"entities/seller/#tipos-de-asignacion","title":"Tipos de Asignaci\u00f3n","text":"<ul> <li><code>direct</code>: Asignado directamente al vendedor</li> <li><code>inherited</code>: Heredado por jerarqu\u00eda territorial</li> <li><code>temporary</code>: Asignaci\u00f3n temporal por necesidad espec\u00edfica</li> </ul>"},{"location":"entities/seller/#ejemplo-de-relacion-comercial","title":"Ejemplo de Relaci\u00f3n Comercial","text":"<pre><code>{\n  \"seller_id\": \"SELLER_001\",\n  \"commerce_relationships\": [{\n    \"commerce_id\": \"COMM_123\",\n    \"relationship_type\": \"primary\",\n    \"start_date\": \"2024-01-01T00:00:00Z\",\n    \"is_active\": true,\n    \"assignment_type\": \"direct\",\n    \"attributes\": [{\n      \"key\": \"visit_frequency\",\n      \"value\": \"weekly\"\n    }]\n  }, {\n    \"commerce_id\": \"COMM_456\",\n    \"relationship_type\": \"secondary\",\n    \"start_date\": \"2024-02-01T00:00:00Z\",\n    \"is_active\": true,\n    \"assignment_type\": \"inherited\",\n    \"attributes\": [{\n      \"key\": \"backup_reason\",\n      \"value\": \"territory_overlap\"\n    }]\n  }]\n}\n</code></pre>"},{"location":"entities/seller/#validaciones","title":"Validaciones","text":""},{"location":"entities/seller/#validaciones-generales","title":"Validaciones Generales","text":"<ol> <li>Identificadores</li> <li><code>seller_id</code> debe ser \u00fanico en todo el sistema</li> <li><code>external_id</code> debe ser \u00fanico por cliente</li> <li> <p><code>employee_id</code> debe ser \u00fanico dentro del CPG</p> </li> <li> <p>Informaci\u00f3n Personal</p> </li> <li>Nombres y apellidos no pueden estar vac\u00edos</li> <li>El email principal debe ser corporativo</li> <li> <p>El formato de tel\u00e9fono debe ser v\u00e1lido</p> </li> <li> <p>Acceso</p> </li> <li>Username debe ser \u00fanico</li> <li>Password debe cumplir pol\u00edtica de seguridad</li> <li>Roles deben ser v\u00e1lidos y activos</li> </ol>"},{"location":"entities/seller/#validaciones-de-negocio","title":"Validaciones de Negocio","text":"<ol> <li>Asignaciones</li> <li>No puede haber solapamiento de territorios</li> <li>Fechas de inicio deben ser v\u00e1lidas</li> <li> <p>Debe haber al menos una asignaci\u00f3n activa</p> </li> <li> <p>Jerarqu\u00eda</p> </li> <li>El supervisor debe existir y estar activo</li> <li>No pueden existir ciclos en la jerarqu\u00eda</li> <li> <p>Niveles deben ser consistentes</p> </li> <li> <p>Relaciones Comerciales</p> </li> <li>Un comercio solo puede tener un vendedor <code>primary</code> activo a la vez</li> <li>Las fechas de relaci\u00f3n deben ser v\u00e1lidas y no solaparse para el mismo tipo</li> <li>Las relaciones <code>temporary</code> deben tener fecha de t\u00e9rmino</li> <li>El <code>assignment_type</code> debe ser consistente con el tipo de relaci\u00f3n</li> <li>Las relaciones heredadas deben corresponder con la jerarqu\u00eda territorial</li> </ol>"},{"location":"entities/seller/#ejemplos-de-uso","title":"Ejemplos de Uso","text":""},{"location":"entities/seller/#vendedor-basico","title":"Vendedor B\u00e1sico","text":"<pre><code>{\n  \"seller_id\": \"SELLER_001\",\n  \"external_id\": \"EMP_123\",\n  \"name\": {\n    \"first_name\": \"Juan\",\n    \"last_name\": \"P\u00e9rez\",\n    \"display_name\": \"Juan P.\"\n  },\n  \"status\": \"active\",\n  \"contacts\": [{\n    \"email\": \"juan.perez@cpg.com\",\n    \"phone\": \"+56912345678\",\n    \"type\": \"work\",\n    \"is_primary\": true\n  }],\n  \"access\": {\n    \"username\": \"jperez\",\n    \"role\": \"sales_rep\",\n    \"permissions\": [\"view_reports\", \"create_orders\"],\n    \"requires_2fa\": true\n  }\n}\n</code></pre>"},{"location":"entities/seller/#vendedor-con-territorios","title":"Vendedor con Territorios","text":"<pre><code>{\n  \"seller_id\": \"SELLER_002\",\n  \"name\": {\n    \"first_name\": \"Mar\u00eda\",\n    \"last_name\": \"Gonz\u00e1lez\"\n  },\n  \"assignments\": [{\n    \"type\": \"territory\",\n    \"code\": \"ZONE_NORTH\",\n    \"name\": \"Zona Norte Santiago\",\n    \"start_date\": \"2024-01-01T00:00:00Z\",\n    \"is_active\": true\n  }, {\n    \"type\": \"portfolio\",\n    \"code\": \"PORTFOLIO_PREMIUM\",\n    \"name\": \"Productos Premium\",\n    \"start_date\": \"2024-01-01T00:00:00Z\",\n    \"is_active\": true\n  }],\n  \"organization\": {\n    \"department\": \"Sales\",\n    \"position\": \"Senior Sales Representative\",\n    \"level\": \"L3\",\n    \"reports_to\": \"SELLER_005\"\n  }\n}\n</code></pre>"},{"location":"entities/seller/#vendedor-con-metas","title":"Vendedor con Metas","text":"<pre><code>{\n  \"seller_id\": \"SELLER_003\",\n  \"targets\": [{\n    \"period\": \"2024-Q1\",\n    \"type\": \"sales_volume\",\n    \"value\": 100000,\n    \"unit\": \"USD\",\n    \"progress\": 75000\n  }, {\n    \"period\": \"2024-Q1\",\n    \"type\": \"new_customers\",\n    \"value\": 20,\n    \"unit\": \"count\",\n    \"progress\": 15\n  }],\n  \"attributes\": [{\n    \"key\": \"specialty\",\n    \"value\": \"new_business\"\n  }, {\n    \"key\": \"certification_level\",\n    \"value\": \"advanced\"\n  }]\n}\n</code></pre>"},{"location":"entities/seller/#notas-de-implementacion","title":"Notas de Implementaci\u00f3n","text":""},{"location":"entities/seller/#gestion-de-acceso","title":"Gesti\u00f3n de Acceso","text":"<ol> <li>Autenticaci\u00f3n</li> <li>Soporte para m\u00faltiples m\u00e9todos</li> <li>Integraci\u00f3n con SSO corporativo</li> <li> <p>Pol\u00edticas de contrase\u00f1as</p> </li> <li> <p>Autorizaci\u00f3n</p> </li> <li>Basada en roles y permisos</li> <li>Herencia de permisos</li> <li>Restricciones por territorio</li> </ol>"},{"location":"entities/seller/#seguridad","title":"Seguridad","text":"<ol> <li>Protecci\u00f3n de Datos</li> <li>Encriptaci\u00f3n de datos sensibles</li> <li>Auditor\u00eda de accesos</li> <li> <p>Protecci\u00f3n contra ataques</p> </li> <li> <p>Cumplimiento</p> </li> <li>GDPR y normativas locales</li> <li>Retenci\u00f3n de datos</li> <li>Privacidad por dise\u00f1o</li> </ol>"},{"location":"entities/seller/#integracion-con-otros-sistemas","title":"Integraci\u00f3n con Otros Sistemas","text":""},{"location":"entities/seller/#apis","title":"APIs","text":"<ol> <li> <p>Endpoints Principales <pre><code>GET    /api/v1/sellers/{seller_id}\nPOST   /api/v1/sellers\nPUT    /api/v1/sellers/{seller_id}\nPATCH  /api/v1/sellers/{seller_id}\nDELETE /api/v1/sellers/{seller_id}\n</code></pre></p> </li> <li> <p>Endpoints de Relaci\u00f3n <pre><code>GET    /api/v1/sellers/{seller_id}/assignments\nGET    /api/v1/sellers/{seller_id}/targets\nGET    /api/v1/sellers/{seller_id}/subordinates\nGET    /api/v1/sellers/{seller_id}/commerces\nPOST   /api/v1/sellers/{seller_id}/commerces\nDELETE /api/v1/sellers/{seller_id}/commerces/{commerce_id}\nPATCH  /api/v1/sellers/{seller_id}/commerces/{commerce_id}\n</code></pre></p> </li> </ol>"},{"location":"entities/seller/#webhooks","title":"Webhooks","text":"<ol> <li>Eventos Disponibles</li> <li><code>seller.created</code></li> <li><code>seller.updated</code></li> <li><code>seller.status_changed</code></li> <li><code>seller.assignment_changed</code></li> <li><code>seller.commerce_relationship_created</code></li> <li><code>seller.commerce_relationship_updated</code></li> <li> <p><code>seller.commerce_relationship_ended</code></p> </li> <li> <p>Formato de Payload    ```</p> </li> </ol>"},{"location":"entities/subscription/","title":"Suscripciones","text":"<p>Las suscripciones representan la configuraci\u00f3n de comunicaci\u00f3n y notificaciones para los diferentes canales del sistema. Cada suscripci\u00f3n define las preferencias y consentimientos de comunicaci\u00f3n para un usuario espec\u00edfico.</p>"},{"location":"entities/subscription/#estructura-de-datos","title":"Estructura de Datos","text":"<pre><code>{\n  // Identificadores\n  \"subscription_id\": \"string\",  // Identificador \u00fanico de la suscripci\u00f3n (not null)\n  \"user_id\": \"string\",         // Identificador del usuario (not null)\n  \"data_object_id\": \"string\",  // ID del objeto de datos (not null)\n\n  // Informaci\u00f3n del canal\n  \"channel\": {\n    \"type\": \"string\",          // Tipo de canal (email, sms, push, whatsapp) (not null)\n    \"identifier\": \"string\",    // Identificador del canal (email, tel\u00e9fono, token) (not null)\n    \"name\": \"string\",          // Nombre descriptivo del canal\n    \"status\": \"string\"         // Estado del canal (active, inactive, pending, blocked)\n  },\n\n  // Consentimientos y preferencias\n  \"preferences\": {\n    \"marketing\": \"boolean\",     // Comunicaciones de marketing\n    \"notifications\": \"boolean\", // Notificaciones del sistema\n    \"promotions\": \"boolean\",    // Ofertas y promociones\n    \"news\": \"boolean\",         // Noticias y actualizaciones\n    \"orders\": \"boolean\",       // Actualizaciones de \u00f3rdenes\n    \"support\": \"boolean\"       // Comunicaciones de soporte\n  },\n\n  // Configuraci\u00f3n de frecuencia\n  \"frequency\": {\n    \"type\": \"string\",          // Tipo de frecuencia (immediate, daily, weekly, custom)\n    \"time_zone\": \"string\",     // Zona horaria del usuario\n    \"quiet_hours\": {           // Horas de no disturbar\n      \"start\": \"string\",       // Hora de inicio (HH:mm)\n      \"end\": \"string\"          // Hora de fin (HH:mm)\n    },\n    \"custom_schedule\": {}      // Configuraci\u00f3n personalizada de horarios\n  },\n\n  // Metadatos de verificaci\u00f3n\n  \"verification\": {\n    \"is_verified\": \"boolean\",  // Canal verificado\n    \"verified_at\": \"timestamp\", // Fecha de verificaci\u00f3n\n    \"verification_method\": \"string\", // M\u00e9todo de verificaci\u00f3n usado\n    \"last_verification_attempt\": \"timestamp\" // \u00daltimo intento de verificaci\u00f3n\n  },\n\n  // Marcas temporales\n  \"created_at\": \"timestamp\",   // Fecha de creaci\u00f3n (not null)\n  \"updated_at\": \"timestamp\",   // \u00daltima actualizaci\u00f3n (not null)\n  \"_created_at\": \"timestamp\",  // Fecha de creaci\u00f3n en Reten (not null)\n  \"_updated_at\": \"timestamp\"   // \u00daltima actualizaci\u00f3n en Reten (not null)\n}\n</code></pre>"},{"location":"entities/subscription/#tipos-de-canal","title":"Tipos de Canal","text":"<ul> <li><code>email</code>: Comunicaciones por correo electr\u00f3nico</li> <li><code>sms</code>: Mensajes de texto</li> <li><code>push</code>: Notificaciones push</li> <li><code>whatsapp</code>: Mensajes por WhatsApp</li> </ul>"},{"location":"entities/subscription/#estados-de-canal","title":"Estados de Canal","text":"<ul> <li><code>active</code>: Canal activo y verificado</li> <li><code>inactive</code>: Canal desactivado por el usuario</li> <li><code>pending</code>: Pendiente de verificaci\u00f3n</li> <li><code>blocked</code>: Canal bloqueado por el sistema</li> </ul>"},{"location":"entities/subscription/#tipos-de-frecuencia","title":"Tipos de Frecuencia","text":"<ul> <li><code>immediate</code>: Env\u00edo inmediato</li> <li><code>daily</code>: Resumen diario</li> <li><code>weekly</code>: Resumen semanal</li> <li><code>custom</code>: Configuraci\u00f3n personalizada</li> </ul>"},{"location":"entities/subscription/#validaciones","title":"Validaciones","text":"<ol> <li>Canal</li> <li>Tipo de canal debe ser v\u00e1lido</li> <li>Identificador debe corresponder al tipo de canal</li> <li> <p>Estado debe ser v\u00e1lido</p> </li> <li> <p>Preferencias</p> </li> <li>Al menos una preferencia debe estar activa</li> <li> <p>Valores booleanos v\u00e1lidos</p> </li> <li> <p>Frecuencia</p> </li> <li>Zona horaria v\u00e1lida</li> <li>Horas de quiet_hours en formato v\u00e1lido</li> <li> <p>Configuraci\u00f3n custom_schedule v\u00e1lida seg\u00fan tipo</p> </li> <li> <p>Verificaci\u00f3n</p> </li> <li>Fechas de verificaci\u00f3n v\u00e1lidas</li> <li>M\u00e9todo de verificaci\u00f3n conocido</li> </ol>"},{"location":"entities/subscription/#ejemplos","title":"Ejemplos","text":""},{"location":"entities/subscription/#suscripcion-de-email","title":"Suscripci\u00f3n de Email","text":"<pre><code>{\n  \"subscription_id\": \"SUB_001\",\n  \"user_id\": \"USER_123\",\n  \"channel\": {\n    \"type\": \"email\",\n    \"identifier\": \"usuario@ejemplo.com\",\n    \"status\": \"active\"\n  },\n  \"preferences\": {\n    \"marketing\": true,\n    \"notifications\": true,\n    \"orders\": true\n  },\n  \"frequency\": {\n    \"type\": \"daily\",\n    \"time_zone\": \"America/Santiago\"\n  }\n}\n</code></pre>"},{"location":"entities/subscription/#suscripcion-de-whatsapp","title":"Suscripci\u00f3n de WhatsApp","text":"<pre><code>{\n  \"subscription_id\": \"SUB_002\",\n  \"user_id\": \"USER_123\",\n  \"channel\": {\n    \"type\": \"whatsapp\",\n    \"identifier\": \"+56912345678\",\n    \"status\": \"pending\"\n  },\n  \"preferences\": {\n    \"orders\": true,\n    \"support\": true\n  },\n  \"frequency\": {\n    \"type\": \"immediate\",\n    \"time_zone\": \"America/Santiago\",\n    \"quiet_hours\": {\n      \"start\": \"22:00\",\n      \"end\": \"08:00\"\n    }\n  }\n}\n</code></pre>"},{"location":"entities/subscription/#notas-de-implementacion","title":"Notas de Implementaci\u00f3n","text":"<ol> <li>Verificaci\u00f3n de Canales</li> <li>Email: Enlace de verificaci\u00f3n</li> <li>SMS/WhatsApp: C\u00f3digo de verificaci\u00f3n</li> <li> <p>Push: Token del dispositivo</p> </li> <li> <p>Gesti\u00f3n de Preferencias</p> </li> <li>Cambios requieren confirmaci\u00f3n</li> <li>Historial de cambios auditable</li> <li> <p>Respeto de regulaciones locales</p> </li> <li> <p>Control de Frecuencia</p> </li> <li>Respetar zona horaria del usuario</li> <li>Consolidaci\u00f3n de mensajes seg\u00fan frecuencia</li> <li>Manejo de excepciones en quiet_hours </li> </ol>"},{"location":"events/","title":"Eventos","text":"<p>Los eventos en Reten representan acciones y cambios significativos que ocurren en el sistema. Cada tipo de evento tiene su propia estructura y prop\u00f3sito espec\u00edfico.</p>"},{"location":"events/#tipos-de-eventos","title":"Tipos de Eventos","text":""},{"location":"events/#marketing","title":"Marketing","text":"<p>Eventos relacionados con campa\u00f1as y comunicaciones: - Env\u00edo de comunicaciones - Respuestas y engagement - Seguimiento de campa\u00f1as</p>"},{"location":"events/#ventas","title":"Ventas","text":"<p>Eventos del proceso de venta: - Creaci\u00f3n de \u00f3rdenes - Confirmaciones de pago - Estados de transacci\u00f3n</p>"},{"location":"events/#productos","title":"Productos","text":"<p>Eventos relacionados con productos: - Actualizaciones de cat\u00e1logo - Cambios de precio - Gesti\u00f3n de inventario</p>"},{"location":"events/#usuario","title":"Usuario","text":"<p>Eventos de interacci\u00f3n de usuarios: - Registro y autenticaci\u00f3n - Actualizaciones de perfil - Preferencias y configuraciones</p>"},{"location":"events/#entregas","title":"Entregas","text":"<p>Eventos del proceso de entrega: - Estados de env\u00edo - Confirmaciones de entrega - Incidencias log\u00edsticas</p>"},{"location":"events/#estructura-general","title":"Estructura General","text":"<p>Todos los eventos comparten una estructura base:</p> <pre><code>{\n  \"event_id\": \"string\",        // Identificador \u00fanico del evento\n  \"event_type\": \"string\",      // Tipo de evento\n  \"timestamp\": \"string\",       // Fecha y hora del evento\n  \"source\": \"string\",          // Origen del evento\n  \"data\": {},                  // Datos espec\u00edficos del evento\n  \"metadata\": {}               // Metadatos adicionales\n}\n</code></pre>"},{"location":"events/#consumo-de-eventos","title":"Consumo de Eventos","text":"<p>Los eventos pueden ser consumidos a trav\u00e9s de: - Webhooks - API REST - Streaming en tiempo real</p> <p>Para m\u00e1s detalles sobre la integraci\u00f3n con eventos, consulta la documentaci\u00f3n de la API de eventos. </p>"},{"location":"events/delivery_events/","title":"Eventos de Entrega","text":"<p>Los eventos de entrega registran todas las interacciones relacionadas con el proceso de entrega de productos, desde la confirmaci\u00f3n hasta la entrega final.</p>"},{"location":"events/delivery_events/#eventos-disponibles","title":"Eventos Disponibles","text":""},{"location":"events/delivery_events/#delivery_confirmed","title":"<code>delivery_confirmed</code>","text":"<p>Registra la confirmaci\u00f3n de una entrega por parte del comercio.</p> <p>Cu\u00e1ndo enviarlo: - Cuando el comercio confirma que puede realizar la entrega - Al asignar un pedido a un repartidor - Al generar una gu\u00eda de despacho</p> <p>Estructura espec\u00edfica: <pre><code>{\n  \"event_type\": \"delivery_confirmed\",\n  \"event_date\": \"2024-03-19T14:30:00Z\",\n  \"user_id\": \"string\",\n\n  \"event_data\": {\n    \"order\": {\n      \"order_id\": \"string\",\n      \"order_date\": \"timestamp\"\n    },\n    \"delivery\": {\n      \"delivery_id\": \"string\",\n      \"type\": \"string\",          // own_fleet, third_party, pickup\n      \"estimated_date\": \"timestamp\",\n      \"time_slot\": {\n        \"start\": \"timestamp\",\n        \"end\": \"timestamp\"\n      }\n    },\n    \"shipping_details\": {\n      \"address\": {\n        \"street\": \"string\",\n        \"number\": \"string\",\n        \"city\": \"string\",\n        \"region\": \"string\",\n        \"country\": \"string\",\n        \"postal_code\": \"string\",\n        \"coordinates\": {\n          \"lat\": \"float64\",\n          \"lng\": \"float64\"\n        }\n      },\n      \"contact\": {\n        \"name\": \"string\",\n        \"phone\": \"string\",\n        \"email\": \"string\"\n      }\n    }\n  }\n}\n</code></pre></p> <p>Campos Requeridos: - <code>order</code>: Informaci\u00f3n de la orden - <code>delivery</code>: Detalles de la entrega - <code>shipping_details</code>: Informaci\u00f3n de env\u00edo</p>"},{"location":"events/delivery_events/#delivery_status_updated","title":"<code>delivery_status_updated</code>","text":"<p>Registra actualizaciones en el estado de una entrega.</p> <p>Cu\u00e1ndo enviarlo: - Cada vez que cambia el estado de la entrega - Al recibir actualizaciones del servicio de delivery - Al actualizar la ubicaci\u00f3n o ETA</p> <p>Estructura espec\u00edfica: <pre><code>{\n  \"event_type\": \"delivery_status_updated\",\n  \"event_date\": \"2024-03-19T14:30:00Z\",\n  \"user_id\": \"string\",\n\n  \"event_data\": {\n    \"delivery\": {\n      \"delivery_id\": \"string\",\n      \"order_id\": \"string\"\n    },\n    \"status\": {\n      \"code\": \"string\",         // preparing, in_transit, delivered, failed\n      \"description\": \"string\",\n      \"timestamp\": \"timestamp\",\n      \"location\": {             // opcional\n        \"lat\": \"float64\",\n        \"lng\": \"float64\",\n        \"address\": \"string\"\n      }\n    },\n    \"metadata\": {\n      \"updated_by\": \"string\",   // system, driver, admin\n      \"reason_code\": \"string\",  // opcional\n      \"notes\": \"string\"         // opcional\n    }\n  }\n}\n</code></pre></p> <p>Campos Requeridos: - <code>delivery</code>: Identificadores de la entrega - <code>status</code>: Nuevo estado y detalles - <code>metadata</code>: Informaci\u00f3n sobre la actualizaci\u00f3n</p>"},{"location":"events/delivery_events/#delivery_completed","title":"<code>delivery_completed</code>","text":"<p>Registra la finalizaci\u00f3n exitosa de una entrega.</p> <p>Cu\u00e1ndo enviarlo: - Cuando se confirma la entrega al cliente - Al recibir confirmaci\u00f3n de recepci\u00f3n - Al completar una entrega en punto de retiro</p> <p>Estructura espec\u00edfica: <pre><code>{\n  \"event_type\": \"delivery_completed\",\n  \"event_date\": \"2024-03-19T14:30:00Z\",\n  \"user_id\": \"string\",\n\n  \"event_data\": {\n    \"delivery\": {\n      \"delivery_id\": \"string\",\n      \"order_id\": \"string\",\n      \"completion_time\": \"timestamp\"\n    },\n    \"confirmation\": {\n      \"type\": \"string\",         // signature, photo, code\n      \"proof\": {\n        \"url\": \"string\",        // opcional\n        \"type\": \"string\",       // opcional\n        \"verified\": \"boolean\"\n      },\n      \"receiver\": {\n        \"name\": \"string\",\n        \"relationship\": \"string\" // self, family, doorman\n      }\n    },\n    \"rating\": {                 // opcional\n      \"score\": \"integer\",\n      \"comments\": \"string\"\n    }\n  }\n}\n</code></pre></p> <p>Campos Requeridos: - <code>delivery</code>: Informaci\u00f3n de la entrega completada - <code>confirmation</code>: Detalles de la confirmaci\u00f3n de entrega</p>"},{"location":"events/delivery_events/#delivery_failed","title":"<code>delivery_failed</code>","text":"<p>Registra cuando una entrega no puede completarse.</p> <p>Cu\u00e1ndo enviarlo: - Cuando no se puede realizar la entrega - Al reportar un problema en la entrega - Cuando el cliente no est\u00e1 disponible</p> <p>Estructura espec\u00edfica: <pre><code>{\n  \"event_type\": \"delivery_failed\",\n  \"event_date\": \"2024-03-19T14:30:00Z\",\n  \"user_id\": \"string\",\n\n  \"event_data\": {\n    \"delivery\": {\n      \"delivery_id\": \"string\",\n      \"order_id\": \"string\",\n      \"attempt_number\": \"integer\"\n    },\n    \"failure\": {\n      \"reason_code\": \"string\",    // no_one_home, wrong_address, rejected\n      \"description\": \"string\",\n      \"evidence\": {               // opcional\n        \"type\": \"string\",\n        \"url\": \"string\"\n      }\n    },\n    \"resolution\": {\n      \"action\": \"string\",         // reschedule, return, cancel\n      \"notes\": \"string\",\n      \"next_attempt\": \"timestamp\" // opcional\n    }\n  }\n}\n</code></pre></p> <p>Campos Requeridos: - <code>delivery</code>: Informaci\u00f3n de la entrega - <code>failure</code>: Raz\u00f3n del fallo - <code>resolution</code>: Plan de acci\u00f3n</p>"},{"location":"events/delivery_events/#flujo-de-eventos","title":"Flujo de Eventos","text":"<p>El flujo t\u00edpico de una entrega sigue este orden:</p> <ol> <li><code>delivery_confirmed</code></li> <li><code>delivery_status_updated</code> (m\u00faltiples actualizaciones)</li> <li><code>delivery_completed</code> o <code>delivery_failed</code></li> </ol>"},{"location":"events/delivery_events/#validaciones-especificas","title":"Validaciones Espec\u00edficas","text":"<ol> <li>Consistencia de IDs</li> <li><code>delivery_id</code> debe ser \u00fanico</li> <li> <p><code>order_id</code> debe corresponder a una orden existente</p> </li> <li> <p>Estados</p> </li> <li>Las transiciones de estado deben ser v\u00e1lidas</li> <li> <p>No se pueden saltar estados obligatorios</p> </li> <li> <p>Temporalidad</p> </li> <li>Las fechas deben seguir una secuencia l\u00f3gica</li> <li>Los timestamps deben ser consistentes con el flujo</li> </ol>"},{"location":"events/delivery_events/#ejemplos-de-implementacion","title":"Ejemplos de Implementaci\u00f3n","text":""},{"location":"events/delivery_events/#javascript","title":"JavaScript","text":"<pre><code>const sendDeliveryEvent = async (eventType, deliveryData) =&gt; {\n  await retenClient.events.track({\n    event_type: eventType,\n    event_date: new Date().toISOString(),\n    user_id: getCurrentUserId(),\n    event_data: {\n      ...deliveryData,\n      metadata: {\n        source_system: getSystemInfo(),\n        tracking_enabled: isTrackingEnabled()\n      }\n    }\n  });\n};\n</code></pre>"},{"location":"events/delivery_events/#python","title":"Python","text":"<pre><code>def send_delivery_event(event_type, delivery_data):\n    reten_client.events.track(\n        event_type=event_type,\n        event_date=datetime.now().isoformat(),\n        user_id=get_current_user_id(),\n        event_data={\n            **delivery_data,\n            \"metadata\": {\n                \"source_system\": get_system_info(),\n                \"tracking_enabled\": is_tracking_enabled()\n            }\n        }\n    )\n</code></pre>"},{"location":"events/marketing_events/","title":"Eventos de Marketing","text":"<p>Los eventos de marketing registran todas las interacciones relacionadas con actividades promocionales, comunicaciones y campa\u00f1as de marketing.</p>"},{"location":"events/marketing_events/#eventos-disponibles","title":"Eventos Disponibles","text":""},{"location":"events/marketing_events/#channel_subscription","title":"<code>channel_subscription</code>","text":"<p>Registra la suscripci\u00f3n o modificaci\u00f3n de preferencias en canales de comunicaci\u00f3n.</p> <p>Cu\u00e1ndo enviarlo: - Al suscribirse a un canal de comunicaci\u00f3n - Al modificar preferencias de comunicaci\u00f3n - Al optar por recibir notificaciones espec\u00edficas</p> <p>Estructura espec\u00edfica: <pre><code>{\n  \"event_type\": \"channel_subscription\",\n  \"event_date\": \"2024-03-19T14:30:00Z\",\n  \"user_id\": \"string\",\n\n  \"event_data\": {\n    \"channel\": {\n      \"type\": \"string\",         // email, sms, whatsapp, push\n      \"status\": \"string\",       // subscribed, unsubscribed, pending\n      \"preferences\": {\n        \"frequency\": \"string\",  // daily, weekly, monthly\n        \"categories\": [\"string\"],\n        \"time_window\": {\n          \"start_hour\": \"integer\",\n          \"end_hour\": \"integer\",\n          \"timezone\": \"string\"\n        }\n      }\n    },\n    \"consent\": {\n      \"given\": \"boolean\",\n      \"timestamp\": \"timestamp\",\n      \"source\": \"string\",      // form, api, import\n      \"terms_version\": \"string\"\n    }\n  }\n}\n</code></pre></p> <p>Campos Requeridos: - <code>channel</code>: Informaci\u00f3n del canal y preferencias - <code>consent</code>: Detalles del consentimiento otorgado</p>"},{"location":"events/marketing_events/#campaign_interaction","title":"<code>campaign_interaction</code>","text":"<p>Registra interacciones con campa\u00f1as de marketing.</p> <p>Cu\u00e1ndo enviarlo: - Al abrir un email de campa\u00f1a - Al hacer click en un link de campa\u00f1a - Al interactuar con una notificaci\u00f3n push</p> <p>Estructura espec\u00edfica: <pre><code>{\n  \"event_type\": \"campaign_interaction\",\n  \"event_date\": \"2024-03-19T14:30:00Z\",\n  \"user_id\": \"string\",\n\n  \"event_data\": {\n    \"campaign\": {\n      \"campaign_id\": \"string\",\n      \"name\": \"string\",\n      \"type\": \"string\",        // promotional, transactional, lifecycle\n      \"channel\": \"string\"      // email, sms, push, whatsapp\n    },\n    \"interaction\": {\n      \"type\": \"string\",        // open, click, view, dismiss\n      \"element\": \"string\",     // button, link, image\n      \"timestamp\": \"timestamp\",\n      \"metadata\": {\n        \"url\": \"string\",       // opcional\n        \"position\": \"string\",  // opcional\n        \"device\": \"string\"     // opcional\n      }\n    },\n    \"context\": {\n      \"session_id\": \"string\",\n      \"device_type\": \"string\",\n      \"platform\": \"string\"\n    }\n  }\n}\n</code></pre></p> <p>Campos Requeridos: - <code>campaign</code>: Informaci\u00f3n de la campa\u00f1a - <code>interaction</code>: Detalles de la interacci\u00f3n - <code>context</code>: Contexto de la interacci\u00f3n</p>"},{"location":"events/marketing_events/#survey_response","title":"<code>survey_response</code>","text":"<p>Registra respuestas a encuestas y formularios de feedback.</p> <p>Cu\u00e1ndo enviarlo: - Al completar una encuesta - Al enviar feedback - Al responder un cuestionario</p> <p>Estructura espec\u00edfica: <pre><code>{\n  \"event_type\": \"survey_response\",\n  \"event_date\": \"2024-03-19T14:30:00Z\",\n  \"user_id\": \"string\",\n\n  \"event_data\": {\n    \"survey\": {\n      \"survey_id\": \"string\",\n      \"type\": \"string\",       // nps, csat, custom\n      \"context\": \"string\"     // post_purchase, service, product\n    },\n    \"responses\": [{\n      \"question_id\": \"string\",\n      \"type\": \"string\",       // rating, text, choice\n      \"value\": \"string\",\n      \"metadata\": {\n        \"scale\": \"string\",    // opcional\n        \"category\": \"string\"  // opcional\n      }\n    }],\n    \"completion\": {\n      \"duration\": \"integer\",  // segundos\n      \"platform\": \"string\",\n      \"submitted\": \"boolean\"\n    }\n  }\n}\n</code></pre></p> <p>Campos Requeridos: - <code>survey</code>: Informaci\u00f3n de la encuesta - <code>responses</code>: Lista de respuestas - <code>completion</code>: Detalles de completitud</p>"},{"location":"events/marketing_events/#promotional_view","title":"<code>promotional_view</code>","text":"<p>Registra visualizaciones de contenido promocional.</p> <p>Cu\u00e1ndo enviarlo: - Al mostrar un banner promocional - Al desplegar una oferta especial - Al presentar contenido personalizado</p> <p>Estructura espec\u00edfica: <pre><code>{\n  \"event_type\": \"promotional_view\",\n  \"event_date\": \"2024-03-19T14:30:00Z\",\n  \"user_id\": \"string\",\n\n  \"event_data\": {\n    \"promotion\": {\n      \"promotion_id\": \"string\",\n      \"type\": \"string\",        // banner, popup, sidebar\n      \"name\": \"string\",\n      \"position\": \"string\"     // home_top, category_sidebar\n    },\n    \"content\": {\n      \"title\": \"string\",\n      \"description\": \"string\",\n      \"creative_id\": \"string\",\n      \"offer\": {\n        \"type\": \"string\",      // discount, bundle, free_shipping\n        \"value\": \"string\"\n      }\n    },\n    \"exposure\": {\n      \"duration\": \"integer\",   // segundos\n      \"viewport\": \"boolean\",   // si estuvo visible\n      \"interaction\": \"boolean\" // si hubo interacci\u00f3n\n    }\n  }\n}\n</code></pre></p> <p>Campos Requeridos: - <code>promotion</code>: Informaci\u00f3n de la promoci\u00f3n - <code>content</code>: Contenido mostrado - <code>exposure</code>: Detalles de la exposici\u00f3n</p>"},{"location":"events/marketing_events/#flujo-de-eventos","title":"Flujo de Eventos","text":"<p>Los eventos de marketing pueden seguir varios flujos:</p> <ol> <li> <p>Suscripci\u00f3n a Comunicaciones:    <pre><code>channel_subscription -&gt; campaign_interaction -&gt; survey_response\n</code></pre></p> </li> <li> <p>Campa\u00f1as Promocionales:    <pre><code>promotional_view -&gt; campaign_interaction -&gt; conversion_event\n</code></pre></p> </li> </ol>"},{"location":"events/marketing_events/#validaciones-especificas","title":"Validaciones Espec\u00edficas","text":"<ol> <li>Consentimiento y Privacidad</li> <li>Verificar consentimiento activo antes de enviar comunicaciones</li> <li>Respetar preferencias de frecuencia y horarios</li> <li> <p>Mantener registro de opt-ins y opt-outs</p> </li> <li> <p>Consistencia de Campa\u00f1as</p> </li> <li><code>campaign_id</code> debe ser v\u00e1lido y activo</li> <li>Las interacciones deben corresponder al tipo de campa\u00f1a</li> <li> <p>Los timestamps deben ser consistentes con el ciclo de vida de la campa\u00f1a</p> </li> <li> <p>Calidad de Datos</p> </li> <li>Las respuestas de encuestas deben estar dentro de rangos v\u00e1lidos</li> <li>Los IDs de promociones deben existir</li> <li>Las URLs en interacciones deben ser v\u00e1lidas</li> </ol>"},{"location":"events/marketing_events/#ejemplos-de-implementacion","title":"Ejemplos de Implementaci\u00f3n","text":""},{"location":"events/marketing_events/#javascript","title":"JavaScript","text":"<pre><code>const sendMarketingEvent = async (eventType, marketingData) =&gt; {\n  await retenClient.events.track({\n    event_type: eventType,\n    event_date: new Date().toISOString(),\n    user_id: getCurrentUserId(),\n    event_data: {\n      ...marketingData,\n      context: {\n        session_id: getSessionId(),\n        platform: getPlatformInfo(),\n        campaign_source: getCampaignSource()\n      }\n    }\n  });\n};\n</code></pre>"},{"location":"events/marketing_events/#python","title":"Python","text":"<pre><code>def send_marketing_event(event_type, marketing_data):\n    reten_client.events.track(\n        event_type=event_type,\n        event_date=datetime.now().isoformat(),\n        user_id=get_current_user_id(),\n        event_data={\n            **marketing_data,\n            \"context\": {\n                \"session_id\": get_session_id(),\n                \"platform\": get_platform_info(),\n                \"campaign_source\": get_campaign_source()\n            }\n        }\n    )\n</code></pre>"},{"location":"events/product_events/","title":"Eventos de Producto","text":"<p>Los eventos de producto registran todas las interacciones de los usuarios con los productos en la plataforma, incluyendo visualizaciones, impresiones y otras interacciones relevantes.</p>"},{"location":"events/product_events/#eventos-disponibles","title":"Eventos Disponibles","text":""},{"location":"events/product_events/#product_viewed","title":"<code>product_viewed</code>","text":"<p>Registra cuando un usuario visualiza un producto en detalle.</p> <p>Cu\u00e1ndo enviarlo: - Cuando un usuario accede a la p\u00e1gina/vista detallada de un producto - Cuando se muestra un modal/popup con detalles del producto - Al expandir informaci\u00f3n detallada de un producto en una lista</p> <p>Estructura espec\u00edfica: <pre><code>{\n  \"event_type\": \"product_viewed\",\n  \"event_date\": \"2024-03-19T14:30:00Z\",\n  \"user_id\": \"string\",\n\n  \"event_data\": {\n    \"product\": {\n      \"product_id\": \"string\",\n      \"name\": \"string\",\n      \"price\": \"float64\",\n      \"category\": \"string\",\n      \"brand\": \"string\",\n      \"attributes\": [{\n        \"key\": \"string\",\n        \"value\": \"string\"\n      }]\n    },\n    \"source\": {\n      \"page\": \"string\",      // home, category, search, recommendations\n      \"section\": \"string\",   // featured, related, trending\n      \"position\": \"integer\"  // posici\u00f3n en la lista/grid si aplica\n    },\n    \"session\": {\n      \"session_id\": \"string\",\n      \"device_type\": \"string\",\n      \"referrer\": \"string\"\n    }\n  }\n}\n</code></pre></p> <p>Campos Requeridos: - <code>product</code>: Informaci\u00f3n completa del producto visualizado - <code>source</code>: Origen de la visualizaci\u00f3n - <code>session</code>: Informaci\u00f3n de la sesi\u00f3n</p>"},{"location":"events/product_events/#product_impressed","title":"<code>product_impressed</code>","text":"<p>Registra cuando un producto es mostrado al usuario en una lista o grid.</p> <p>Cu\u00e1ndo enviarlo: - Cuando un producto aparece en el viewport del usuario - Al cargar una lista de productos - En resultados de b\u00fasqueda o filtrado</p> <p>Estructura espec\u00edfica: <pre><code>{\n  \"event_type\": \"product_impressed\",\n  \"event_date\": \"2024-03-19T14:30:00Z\",\n  \"user_id\": \"string\",\n\n  \"event_data\": {\n    \"products\": [{\n      \"product_id\": \"string\",\n      \"position\": \"integer\",\n      \"list_id\": \"string\"\n    }],\n    \"context\": {\n      \"page\": \"string\",\n      \"section\": \"string\",\n      \"filter_applied\": [{\n        \"key\": \"string\",\n        \"value\": \"string\"\n      }],\n      \"sort_by\": \"string\"\n    },\n    \"session\": {\n      \"session_id\": \"string\",\n      \"device_type\": \"string\"\n    }\n  }\n}\n</code></pre></p> <p>Campos Requeridos: - <code>products</code>: Lista de productos impresionados - <code>context</code>: Contexto donde se mostraron los productos</p>"},{"location":"events/product_events/#product_clicked","title":"<code>product_clicked</code>","text":"<p>Registra cuando un usuario hace click en un producto.</p> <p>Cu\u00e1ndo enviarlo: - Al hacer click en un producto en una lista - Al interactuar con una card de producto - Cuando se selecciona un producto en resultados de b\u00fasqueda</p> <p>Estructura espec\u00edfica: <pre><code>{\n  \"event_type\": \"product_clicked\",\n  \"event_date\": \"2024-03-19T14:30:00Z\",\n  \"user_id\": \"string\",\n\n  \"event_data\": {\n    \"product\": {\n      \"product_id\": \"string\",\n      \"name\": \"string\",\n      \"position\": \"integer\",\n      \"price\": \"float64\"\n    },\n    \"source\": {\n      \"page\": \"string\",\n      \"section\": \"string\",\n      \"list_id\": \"string\"\n    },\n    \"interaction\": {\n      \"element\": \"string\",    // image, title, price, button\n      \"destination\": \"string\" // product_page, quick_view, add_to_cart\n    }\n  }\n}\n</code></pre></p> <p>Campos Requeridos: - <code>product</code>: Informaci\u00f3n b\u00e1sica del producto clickeado - <code>source</code>: Origen del click - <code>interaction</code>: Detalles de la interacci\u00f3n</p>"},{"location":"events/product_events/#product_favorited","title":"<code>product_favorited</code>","text":"<p>Registra cuando un usuario marca un producto como favorito.</p> <p>Cu\u00e1ndo enviarlo: - Al agregar un producto a favoritos/wishlist - Al marcar un producto para ver m\u00e1s tarde - Al guardar un producto en una lista personalizada</p> <p>Estructura espec\u00edfica: <pre><code>{\n  \"event_type\": \"product_favorited\",\n  \"event_date\": \"2024-03-19T14:30:00Z\",\n  \"user_id\": \"string\",\n\n  \"event_data\": {\n    \"product\": {\n      \"product_id\": \"string\",\n      \"name\": \"string\",\n      \"price\": \"float64\"\n    },\n    \"list_details\": {\n      \"list_id\": \"string\",\n      \"list_name\": \"string\",  // favorites, wishlist, custom_list_name\n      \"list_type\": \"string\"\n    },\n    \"source\": {\n      \"page\": \"string\",\n      \"section\": \"string\"\n    }\n  }\n}\n</code></pre></p> <p>Campos Requeridos: - <code>product</code>: Informaci\u00f3n del producto favoriteado - <code>list_details</code>: Detalles de la lista donde se guard\u00f3</p>"},{"location":"events/product_events/#flujo-de-eventos","title":"Flujo de Eventos","text":"<p>El flujo t\u00edpico de interacci\u00f3n con productos sigue este patr\u00f3n:</p> <ol> <li><code>product_impressed</code> (m\u00faltiples productos)</li> <li><code>product_clicked</code> (un producto espec\u00edfico)</li> <li><code>product_viewed</code> (vista detallada)</li> <li>Opcionalmente:</li> <li><code>product_favorited</code></li> <li><code>product_add_to_cart</code></li> </ol>"},{"location":"events/product_events/#validaciones-especificas","title":"Validaciones Espec\u00edficas","text":"<ol> <li>Consistencia de Productos</li> <li><code>product_id</code> debe ser v\u00e1lido y existir en el cat\u00e1logo</li> <li> <p>Los precios deben corresponder al precio actual del producto</p> </li> <li> <p>Secuencia de Eventos</p> </li> <li>Un <code>product_clicked</code> deber\u00eda estar precedido por un <code>product_impressed</code></li> <li> <p>Un <code>product_viewed</code> deber\u00eda seguir a un <code>product_clicked</code> (con excepciones para acceso directo)</p> </li> <li> <p>Posiciones y Listas</p> </li> <li>Las posiciones deben ser n\u00fameros positivos</li> <li>Los <code>list_id</code> deben ser consistentes en eventos relacionados</li> </ol>"},{"location":"events/product_events/#ejemplos-de-implementacion","title":"Ejemplos de Implementaci\u00f3n","text":""},{"location":"events/product_events/#javascript","title":"JavaScript","text":"<pre><code>const sendProductEvent = async (eventType, productData) =&gt; {\n  await retenClient.events.track({\n    event_type: eventType,\n    event_date: new Date().toISOString(),\n    user_id: getCurrentUserId(),\n    event_data: {\n      ...productData,\n      session: {\n        session_id: getSessionId(),\n        device_type: getDeviceType()\n      }\n    }\n  });\n};\n</code></pre>"},{"location":"events/product_events/#python","title":"Python","text":"<pre><code>def send_product_event(event_type, product_data):\n    reten_client.events.track(\n        event_type=event_type,\n        event_date=datetime.now().isoformat(),\n        user_id=get_current_user_id(),\n        event_data={\n            **product_data,\n            \"session\": {\n                \"session_id\": get_session_id(),\n                \"device_type\": get_device_type()\n            }\n        }\n    )\n</code></pre>"},{"location":"events/sales_events/","title":"Eventos de Venta","text":"<p>Los eventos de venta registran todas las interacciones relacionadas con el proceso de compra, desde la creaci\u00f3n del carrito hasta la confirmaci\u00f3n del pago.</p>"},{"location":"events/sales_events/#eventos-disponibles","title":"Eventos Disponibles","text":""},{"location":"events/sales_events/#cart_started","title":"<code>cart_started</code>","text":"<p>Registra el inicio de un nuevo carrito de compras.</p> <p>Cu\u00e1ndo enviarlo: - Al crear un nuevo carrito de compras - Al iniciar una nueva sesi\u00f3n de compra</p> <p>Estructura espec\u00edfica: <pre><code>{\n  // Campos base obligatorios\n  \"event_type\": \"cart_started\",\n  \"event_date\": \"2024-03-19T14:30:00Z\",\n  \"user_id\": \"string\",\n\n  // Datos espec\u00edficos del evento\n  \"event_data\": {\n    \"cart_id\": \"string\",\n    \"source\": \"string\",      // web, app, pos\n    \"initial_items\": [{      // Opcional\n      \"item_id\": \"string\",\n      \"quantity\": \"float64\"\n    }]\n  }\n}\n</code></pre></p> <p>Campos Requeridos: - <code>cart_id</code>: Identificador \u00fanico del carrito - <code>source</code>: Origen del carrito</p>"},{"location":"events/sales_events/#product_add_to_cart","title":"<code>product_add_to_cart</code>","text":"<p>Registra la adici\u00f3n de un producto al carrito.</p> <p>Cu\u00e1ndo enviarlo: - Cada vez que se agrega un producto al carrito - Cuando se modifica la cantidad de un producto existente (incremento)</p> <p>Estructura espec\u00edfica: <pre><code>{\n  \"event_type\": \"product_add_to_cart\",\n  \"event_date\": \"2024-03-19T14:30:00Z\",\n  \"user_id\": \"string\",\n\n  \"event_data\": {\n    \"cart_id\": \"string\",\n    \"item\": {\n      \"item_id\": \"string\",\n      \"name\": \"string\",\n      \"price\": \"float64\",\n      \"quantity\": \"float64\",\n      \"category\": \"string\",\n      \"attributes\": [{\n        \"key\": \"string\",\n        \"value\": \"string\"\n      }]\n    },\n    \"cart_state\": {\n      \"total_items\": \"integer\",\n      \"total_amount\": \"float64\"\n    }\n  }\n}\n</code></pre></p> <p>Campos Requeridos: - <code>cart_id</code>: Identificador del carrito - <code>item</code>: Informaci\u00f3n completa del producto agregado - <code>cart_state</code>: Estado actual del carrito</p>"},{"location":"events/sales_events/#checkout_started","title":"<code>checkout_started</code>","text":"<p>Registra el inicio del proceso de checkout.</p> <p>Cu\u00e1ndo enviarlo: - Cuando el usuario inicia el proceso de checkout - Al entrar a la p\u00e1gina/vista de checkout</p> <p>Estructura espec\u00edfica: <pre><code>{\n  \"event_type\": \"checkout_started\",\n  \"event_date\": \"2024-03-19T14:30:00Z\",\n  \"user_id\": \"string\",\n\n  \"event_data\": {\n    \"cart_id\": \"string\",\n    \"pricing\": {\n      \"net_amount\": \"float64\",\n      \"final_amount\": \"float64\",\n      \"discount_amount\": \"float64\",\n      \"shipping_amount\": \"float64\",\n      \"tax_amount\": \"float64\"\n    },\n    \"items\": [{\n      \"item_id\": \"string\",\n      \"name\": \"string\",\n      \"price\": \"float64\",\n      \"quantity\": \"float64\",\n      \"category\": \"string\"\n    }],\n    \"coupon_code\": \"string\"\n  }\n}\n</code></pre></p> <p>Campos Requeridos: - <code>cart_id</code>: Identificador del carrito - <code>pricing</code>: Desglose de precios - <code>items</code>: Lista de productos en el carrito</p>"},{"location":"events/sales_events/#payment_completed","title":"<code>payment_completed</code>","text":"<p>Registra la finalizaci\u00f3n exitosa de un pago.</p> <p>Cu\u00e1ndo enviarlo: - Cuando se confirma el pago exitoso - Despu\u00e9s de recibir la confirmaci\u00f3n del procesador de pagos</p> <p>Estructura espec\u00edfica: <pre><code>{\n  \"event_type\": \"payment_completed\",\n  \"event_date\": \"2024-03-19T14:30:00Z\",\n  \"user_id\": \"string\",\n\n  \"event_data\": {\n    \"order_id\": \"string\",\n    \"cart_id\": \"string\",\n    \"payment_details\": {\n      \"method\": \"string\",\n      \"amount\": \"float64\",\n      \"status\": \"string\",\n      \"date\": \"timestamp\"\n    },\n    \"billing_address\": {\n      \"city\": \"string\",\n      \"name\": \"string\",\n      \"street\": \"string\",\n      \"commune\": \"string\",\n      \"region\": \"string\",\n      \"number\": \"string\",\n      \"dept_number\": \"string\"\n    },\n    \"shipping_address\": {\n      \"city\": \"string\",\n      \"name\": \"string\",\n      \"street\": \"string\",\n      \"commune\": \"string\",\n      \"region\": \"string\",\n      \"number\": \"string\",\n      \"dept_number\": \"string\"\n    }\n  }\n}\n</code></pre></p> <p>Campos Requeridos: - <code>order_id</code>: Identificador de la orden - <code>payment_details</code>: Detalles completos del pago - <code>billing_address</code>: Direcci\u00f3n de facturaci\u00f3n</p>"},{"location":"events/sales_events/#flujo-de-eventos","title":"Flujo de Eventos","text":"<p>El flujo t\u00edpico de eventos de venta sigue este orden:</p> <ol> <li><code>cart_started</code></li> <li><code>product_add_to_cart</code> (puede ocurrir m\u00faltiples veces)</li> <li><code>product_remove_cart</code> (opcional)</li> <li><code>checkout_started</code></li> <li><code>payment_initiated</code></li> <li><code>payment_completed</code> o <code>payment_failed</code></li> <li><code>order_created</code> (si el pago es exitoso)</li> <li><code>order_confirmed</code></li> </ol>"},{"location":"events/sales_events/#validaciones-especificas","title":"Validaciones Espec\u00edficas","text":"<p>Cada evento de venta debe cumplir con las siguientes validaciones:</p> <ol> <li>Consistencia de IDs</li> <li><code>cart_id</code> debe ser consistente en todos los eventos relacionados</li> <li> <p><code>order_id</code> debe ser \u00fanico por orden</p> </li> <li> <p>Montos</p> </li> <li>Todos los montos deben ser positivos</li> <li> <p><code>final_amount</code> debe ser igual a <code>net_amount</code> - <code>discount_amount</code> + <code>shipping_amount</code> + <code>tax_amount</code></p> </li> <li> <p>Temporalidad</p> </li> <li>Los eventos deben seguir una secuencia temporal l\u00f3gica</li> <li>Las fechas no pueden ser futuras</li> </ol>"},{"location":"events/sales_events/#ejemplos-de-implementacion","title":"Ejemplos de Implementaci\u00f3n","text":""},{"location":"events/sales_events/#javascript","title":"JavaScript","text":"<pre><code>const sendSalesEvent = async (eventType, eventData) =&gt; {\n  await retenClient.events.track({\n    event_type: eventType,\n    event_date: new Date().toISOString(),\n    user_id: getCurrentUserId(),\n    event_data: eventData\n  });\n};\n</code></pre>"},{"location":"events/sales_events/#python","title":"Python","text":"<pre><code>def send_sales_event(event_type, event_data):\n    reten_client.events.track(\n        event_type=event_type,\n        event_date=datetime.now().isoformat(),\n        user_id=get_current_user_id(),\n        event_data=event_data\n    )\n</code></pre>"},{"location":"events/user_events/","title":"Eventos de Usuario","text":"<p>Los eventos de usuario registran todas las interacciones relacionadas con la gesti\u00f3n de cuentas, autenticaci\u00f3n y autorizaci\u00f3n en la plataforma.</p>"},{"location":"events/user_events/#eventos-disponibles","title":"Eventos Disponibles","text":""},{"location":"events/user_events/#account_requested","title":"<code>account_requested</code>","text":"<p>Registra cuando un usuario solicita la creaci\u00f3n de una cuenta.</p> <p>Cu\u00e1ndo enviarlo: - Al completar un formulario de registro - Al solicitar una invitaci\u00f3n - Al iniciar proceso de creaci\u00f3n de cuenta</p> <p>Estructura espec\u00edfica: <pre><code>{\n  \"event_type\": \"account_requested\",\n  \"event_date\": \"2024-03-19T14:30:00Z\",\n  \"user_id\": \"string\",\n\n  \"event_data\": {\n    \"account\": {\n      \"email\": \"string\",\n      \"name\": \"string\",\n      \"type\": \"string\",      // personal, business\n      \"role\": \"string\"       // buyer, seller, admin\n    },\n    \"business_info\": {       // opcional, para cuentas business\n      \"company_name\": \"string\",\n      \"tax_id\": \"string\",\n      \"industry\": \"string\"\n    },\n    \"source\": {\n      \"channel\": \"string\",   // web, app, sales_rep\n      \"campaign\": \"string\",  // opcional\n      \"referrer\": \"string\"   // opcional\n    }\n  }\n}\n</code></pre></p> <p>Campos Requeridos: - <code>account</code>: Informaci\u00f3n b\u00e1sica de la cuenta solicitada - <code>source</code>: Origen de la solicitud</p>"},{"location":"events/user_events/#account_created","title":"<code>account_created</code>","text":"<p>Registra la creaci\u00f3n exitosa de una cuenta.</p> <p>Cu\u00e1ndo enviarlo: - Cuando se completa el proceso de creaci\u00f3n de cuenta - Al confirmar el email de verificaci\u00f3n - Al activar una cuenta pre-registrada</p> <p>Estructura espec\u00edfica: <pre><code>{\n  \"event_type\": \"account_created\",\n  \"event_date\": \"2024-03-19T14:30:00Z\",\n  \"user_id\": \"string\",\n\n  \"event_data\": {\n    \"account\": {\n      \"account_id\": \"string\",\n      \"email\": \"string\",\n      \"name\": \"string\",\n      \"type\": \"string\",\n      \"role\": \"string\",\n      \"status\": \"string\"     // active, pending_verification\n    },\n    \"preferences\": {\n      \"language\": \"string\",\n      \"currency\": \"string\",\n      \"notifications\": [{\n        \"channel\": \"string\",\n        \"enabled\": \"boolean\"\n      }]\n    },\n    \"metadata\": {\n      \"creation_method\": \"string\",  // self_service, admin_created, invitation\n      \"verification_status\": \"string\"\n    }\n  }\n}\n</code></pre></p> <p>Campos Requeridos: - <code>account</code>: Informaci\u00f3n completa de la cuenta creada - <code>metadata</code>: Metadatos del proceso de creaci\u00f3n</p>"},{"location":"events/user_events/#customer_authorized","title":"<code>customer_authorized</code>","text":"<p>Registra la autorizaci\u00f3n de un cliente para operar en la plataforma.</p> <p>Cu\u00e1ndo enviarlo: - Al aprobar una cuenta de cliente - Al asignar permisos espec\u00edficos - Al activar funcionalidades para un cliente</p> <p>Estructura espec\u00edfica: <pre><code>{\n  \"event_type\": \"customer_authorized\",\n  \"event_date\": \"2024-03-19T14:30:00Z\",\n  \"user_id\": \"string\",\n\n  \"event_data\": {\n    \"customer\": {\n      \"customer_id\": \"string\",\n      \"account_id\": \"string\",\n      \"type\": \"string\"\n    },\n    \"authorization\": {\n      \"level\": \"string\",     // full, restricted, trial\n      \"channels\": [\"string\"],\n      \"features\": [\"string\"],\n      \"valid_until\": \"timestamp\"  // opcional\n    },\n    \"approver\": {\n      \"user_id\": \"string\",\n      \"role\": \"string\"\n    }\n  }\n}\n</code></pre></p> <p>Campos Requeridos: - <code>customer</code>: Informaci\u00f3n del cliente autorizado - <code>authorization</code>: Detalles de la autorizaci\u00f3n - <code>approver</code>: Informaci\u00f3n de quien autoriz\u00f3</p>"},{"location":"events/user_events/#account_login","title":"<code>account_login</code>","text":"<p>Registra los inicios de sesi\u00f3n en la plataforma.</p> <p>Cu\u00e1ndo enviarlo: - Al iniciar sesi\u00f3n exitosamente - Al renovar una sesi\u00f3n - Al usar SSO para acceder</p> <p>Estructura espec\u00edfica: <pre><code>{\n  \"event_type\": \"account_login\",\n  \"event_date\": \"2024-03-19T14:30:00Z\",\n  \"user_id\": \"string\",\n\n  \"event_data\": {\n    \"session\": {\n      \"session_id\": \"string\",\n      \"login_method\": \"string\",  // password, sso, token\n      \"device_type\": \"string\",\n      \"ip_address\": \"string\"\n    },\n    \"security\": {\n      \"mfa_used\": \"boolean\",\n      \"mfa_type\": \"string\",      // opcional\n      \"location\": {              // opcional\n        \"country\": \"string\",\n        \"city\": \"string\"\n      }\n    }\n  }\n}\n</code></pre></p> <p>Campos Requeridos: - <code>session</code>: Informaci\u00f3n de la sesi\u00f3n iniciada - <code>security</code>: Detalles de seguridad del login</p>"},{"location":"events/user_events/#flujo-de-eventos","title":"Flujo de Eventos","text":"<p>El flujo t\u00edpico de gesti\u00f3n de usuarios sigue este orden:</p> <ol> <li><code>account_requested</code></li> <li><code>account_created</code></li> <li><code>customer_authorized</code> (si requiere aprobaci\u00f3n)</li> <li><code>account_login</code> (m\u00faltiples ocurrencias)</li> </ol>"},{"location":"events/user_events/#validaciones-especificas","title":"Validaciones Espec\u00edficas","text":"<ol> <li>Seguridad</li> <li>Los emails deben ser \u00fanicos</li> <li>Los <code>account_id</code> deben ser \u00fanicos</li> <li> <p>Las contrase\u00f1as no deben incluirse en los eventos</p> </li> <li> <p>Consistencia</p> </li> <li>Los <code>user_id</code> deben ser consistentes entre eventos relacionados</li> <li> <p>Los roles y permisos deben ser v\u00e1lidos seg\u00fan la configuraci\u00f3n</p> </li> <li> <p>Temporalidad</p> </li> <li><code>account_created</code> debe seguir a <code>account_requested</code></li> <li><code>customer_authorized</code> debe seguir a <code>account_created</code></li> </ol>"},{"location":"events/user_events/#ejemplos-de-implementacion","title":"Ejemplos de Implementaci\u00f3n","text":""},{"location":"events/user_events/#javascript","title":"JavaScript","text":"<pre><code>const sendUserEvent = async (eventType, userData) =&gt; {\n  await retenClient.events.track({\n    event_type: eventType,\n    event_date: new Date().toISOString(),\n    user_id: getCurrentUserId(),\n    event_data: {\n      ...userData,\n      session: {\n        session_id: getSessionId(),\n        device_type: getDeviceType()\n      }\n    }\n  });\n};\n</code></pre>"},{"location":"events/user_events/#python","title":"Python","text":"<pre><code>def send_user_event(event_type, user_data):\n    reten_client.events.track(\n        event_type=event_type,\n        event_date=datetime.now().isoformat(),\n        user_id=get_current_user_id(),\n        event_data={\n            **user_data,\n            \"session\": {\n                \"session_id\": get_session_id(),\n                \"device_type\": get_device_type()\n            }\n        }\n    )\n</code></pre>"},{"location":"integration/events_api/","title":"API de Eventos","text":"<p>La API de eventos de Reten permite la integraci\u00f3n con el sistema de eventos a trav\u00e9s de diferentes m\u00e9todos.</p>"},{"location":"integration/events_api/#metodos-de-integracion","title":"M\u00e9todos de Integraci\u00f3n","text":""},{"location":"integration/events_api/#1-webhooks","title":"1. Webhooks","text":"<p>Configuraci\u00f3n de endpoints para recibir eventos en tiempo real:</p> <pre><code>POST https://api.example.com/webhook\nContent-Type: application/json\nX-Reten-Signature: sha256=...\n\n{\n  \"event_id\": \"evt_123\",\n  \"event_type\": \"order.created\",\n  \"timestamp\": \"2024-03-19T12:00:00Z\",\n  \"data\": {\n    \"order_id\": \"ord_456\",\n    \"status\": \"pending\"\n  }\n}\n</code></pre>"},{"location":"integration/events_api/#2-api-rest","title":"2. API REST","text":"<p>Endpoints para consulta y gesti\u00f3n de eventos:</p> <pre><code># Listar eventos\nGET /api/v1/events\n\n# Obtener evento espec\u00edfico\nGET /api/v1/events/{event_id}\n\n# Crear evento\nPOST /api/v1/events\n\n# Actualizar evento\nPUT /api/v1/events/{event_id}\n</code></pre>"},{"location":"integration/events_api/#3-streaming","title":"3. Streaming","text":"<p>Conexi\u00f3n mediante WebSocket para eventos en tiempo real:</p> <pre><code>const ws = new WebSocket('wss://api.example.com/events/stream');\nws.onmessage = (event) =&gt; {\n  const data = JSON.parse(event.data);\n  console.log('Nuevo evento:', data);\n};\n</code></pre>"},{"location":"integration/events_api/#autenticacion","title":"Autenticaci\u00f3n","text":"<p>Todas las peticiones deben incluir un token de autenticaci\u00f3n:</p> <pre><code>Authorization: Bearer your-api-key\n</code></pre>"},{"location":"integration/events_api/#rate-limits","title":"Rate Limits","text":"<ul> <li>Webhooks: 100 eventos/segundo</li> <li>API REST: 1000 peticiones/minuto</li> <li>Streaming: Sin l\u00edmite</li> </ul>"},{"location":"integration/events_api/#manejo-de-errores","title":"Manejo de Errores","text":"<pre><code>{\n  \"error\": {\n    \"code\": \"rate_limit_exceeded\",\n    \"message\": \"Has excedido el l\u00edmite de peticiones\",\n    \"status\": 429\n  }\n}\n</code></pre>"},{"location":"integration/events_api/#ejemplos-de-implementacion","title":"Ejemplos de Implementaci\u00f3n","text":""},{"location":"integration/events_api/#nodejs","title":"Node.js","text":"<pre><code>const axios = require('axios');\n\nasync function getEvents() {\n  try {\n    const response = await axios.get('https://api.example.com/events', {\n      headers: { 'Authorization': 'Bearer your-api-key' }\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error:', error.response.data);\n  }\n}\n</code></pre>"},{"location":"integration/events_api/#python","title":"Python","text":"<pre><code>import requests\n\ndef get_events():\n    try:\n        response = requests.get(\n            'https://api.example.com/events',\n            headers={'Authorization': 'Bearer your-api-key'}\n        )\n        return response.json()\n    except requests.exceptions.RequestException as e:\n        print(f'Error: {e}')\n</code></pre>"},{"location":"integration/events_api/#mejores-practicas","title":"Mejores Pr\u00e1cticas","text":"<ol> <li>Manejo de Reintentos</li> <li>Implementar backoff exponencial</li> <li>Definir n\u00famero m\u00e1ximo de reintentos</li> <li> <p>Almacenar eventos fallidos</p> </li> <li> <p>Procesamiento de Eventos</p> </li> <li>Procesar eventos de forma as\u00edncrona</li> <li>Validar firma de webhooks</li> <li> <p>Mantener idempotencia</p> </li> <li> <p>Monitoreo</p> </li> <li>Registrar latencia de eventos</li> <li>Monitorear tasa de errores</li> <li>Alertas por umbrales </li> </ol>"}]}