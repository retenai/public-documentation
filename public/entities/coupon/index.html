<!doctype html><html lang=es class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Documentación técnica de Reten"><meta name=author content="Reten Team"><link href=https://retenai.github.io/public-documentation/entities/coupon/ rel=canonical><link href=../product/ rel=prev><link href=../category/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.9"><title>Cupones - Reten Documentation</title><link rel=stylesheet href=../../assets/stylesheets/main.4af4bdda.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#cupones class=md-skip> Saltar a contenido </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Cabecera> <a href=../.. title="Reten Documentation" class="md-header__button md-logo" aria-label="Reten Documentation" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Reten Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Cupones </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Búsqueda placeholder=Búsqueda autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Buscar> <a href=javascript:void(0) class="md-search__icon md-icon" title=Compartir aria-label=Compartir data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Limpiar aria-label=Limpiar tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Inicializando búsqueda </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/retenai/public-documentation title="Ir al repositorio" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> retenai/public-documentation </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Pestañas data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Inicio </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../ class=md-tabs__link> Entidades </a> </li> <li class=md-tabs__item> <a href=../../events/marketing_events/ class=md-tabs__link> Eventos </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navegación data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Reten Documentation" class="md-nav__button md-logo" aria-label="Reten Documentation" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> Reten Documentation </label> <div class=md-nav__source> <a href=https://github.com/retenai/public-documentation title="Ir al repositorio" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> retenai/public-documentation </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Inicio </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> Entidades </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Entidades </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> Resumen </span> </a> </li> <li class=md-nav__item> <a href=../commerce/ class=md-nav__link> <span class=md-ellipsis> Comercios </span> </a> </li> <li class=md-nav__item> <a href=../seller/ class=md-nav__link> <span class=md-ellipsis> Vendedores </span> </a> </li> <li class=md-nav__item> <a href=../product/ class=md-nav__link> <span class=md-ellipsis> Productos </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Cupones </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Cupones </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Tabla de contenidos </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#estructura-de-datos class=md-nav__link> <span class=md-ellipsis> Estructura de Datos </span> </a> </li> <li class=md-nav__item> <a href=#tipos-de-beneficio class=md-nav__link> <span class=md-ellipsis> Tipos de Beneficio </span> </a> </li> <li class=md-nav__item> <a href=#formato-de-reglas class=md-nav__link> <span class=md-ellipsis> Formato de Reglas </span> </a> <nav class=md-nav aria-label="Formato de Reglas"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#reglas-de-categoria class=md-nav__link> <span class=md-ellipsis> Reglas de Categoría </span> </a> </li> <li class=md-nav__item> <a href=#reglas-de-tiempo class=md-nav__link> <span class=md-ellipsis> Reglas de Tiempo </span> </a> </li> <li class=md-nav__item> <a href=#reglas-de-ubicacion class=md-nav__link> <span class=md-ellipsis> Reglas de Ubicación </span> </a> </li> <li class=md-nav__item> <a href=#reglas-de-producto class=md-nav__link> <span class=md-ellipsis> Reglas de Producto </span> </a> </li> <li class=md-nav__item> <a href=#reglas-de-combo class=md-nav__link> <span class=md-ellipsis> Reglas de Combo </span> </a> </li> <li class=md-nav__item> <a href=#reglas-de-usuario class=md-nav__link> <span class=md-ellipsis> Reglas de Usuario </span> </a> </li> <li class=md-nav__item> <a href=#reglas-de-orden class=md-nav__link> <span class=md-ellipsis> Reglas de Orden </span> </a> </li> <li class=md-nav__item> <a href=#ejemplo-de-uso-en-sql class=md-nav__link> <span class=md-ellipsis> Ejemplo de Uso en SQL </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#campos-detallados class=md-nav__link> <span class=md-ellipsis> Campos Detallados </span> </a> <nav class=md-nav aria-label="Campos Detallados"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#identificadores class=md-nav__link> <span class=md-ellipsis> Identificadores </span> </a> </li> <li class=md-nav__item> <a href=#informacion-basica class=md-nav__link> <span class=md-ellipsis> Información Básica </span> </a> </li> <li class=md-nav__item> <a href=#beneficios class=md-nav__link> <span class=md-ellipsis> Beneficios </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#validaciones class=md-nav__link> <span class=md-ellipsis> Validaciones </span> </a> <nav class=md-nav aria-label=Validaciones> <ul class=md-nav__list> <li class=md-nav__item> <a href=#validaciones-generales class=md-nav__link> <span class=md-ellipsis> Validaciones Generales </span> </a> </li> <li class=md-nav__item> <a href=#validaciones-de-negocio class=md-nav__link> <span class=md-ellipsis> Validaciones de Negocio </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#ejemplos-de-uso class=md-nav__link> <span class=md-ellipsis> Ejemplos de Uso </span> </a> <nav class=md-nav aria-label="Ejemplos de Uso"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#cupon-de-descuento-porcentual class=md-nav__link> <span class=md-ellipsis> Cupón de Descuento Porcentual </span> </a> </li> <li class=md-nav__item> <a href=#cupon-de-envio-gratis class=md-nav__link> <span class=md-ellipsis> Cupón de Envío Gratis </span> </a> </li> <li class=md-nav__item> <a href=#cupon-para-productos-especificos class=md-nav__link> <span class=md-ellipsis> Cupón para Productos Específicos </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#notas-de-implementacion class=md-nav__link> <span class=md-ellipsis> Notas de Implementación </span> </a> <nav class=md-nav aria-label="Notas de Implementación"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#gestion-de-redenciones class=md-nav__link> <span class=md-ellipsis> Gestión de Redenciones </span> </a> </li> <li class=md-nav__item> <a href=#optimizacion class=md-nav__link> <span class=md-ellipsis> Optimización </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#integracion-con-otros-sistemas class=md-nav__link> <span class=md-ellipsis> Integración con Otros Sistemas </span> </a> <nav class=md-nav aria-label="Integración con Otros Sistemas"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#apis class=md-nav__link> <span class=md-ellipsis> APIs </span> </a> </li> <li class=md-nav__item> <a href=#webhooks class=md-nav__link> <span class=md-ellipsis> Webhooks </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#preguntas-frecuentes class=md-nav__link> <span class=md-ellipsis> Preguntas Frecuentes </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../subscription/README.md class=md-nav__link> <span class=md-ellipsis> Suscripciones </span> </a> </li> <li class=md-nav__item> <a href=../category/ class=md-nav__link> <span class=md-ellipsis> Categorías </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Eventos </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Eventos </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../events/marketing_events/ class=md-nav__link> <span class=md-ellipsis> Marketing </span> </a> </li> <li class=md-nav__item> <a href=../../events/sales_events/ class=md-nav__link> <span class=md-ellipsis> Ventas </span> </a> </li> <li class=md-nav__item> <a href=../../events/product_events/ class=md-nav__link> <span class=md-ellipsis> Productos </span> </a> </li> <li class=md-nav__item> <a href=../../events/user_events/ class=md-nav__link> <span class=md-ellipsis> Usuario </span> </a> </li> <li class=md-nav__item> <a href=../../events/delivery_events/ class=md-nav__link> <span class=md-ellipsis> Entregas </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Tabla de contenidos </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#estructura-de-datos class=md-nav__link> <span class=md-ellipsis> Estructura de Datos </span> </a> </li> <li class=md-nav__item> <a href=#tipos-de-beneficio class=md-nav__link> <span class=md-ellipsis> Tipos de Beneficio </span> </a> </li> <li class=md-nav__item> <a href=#formato-de-reglas class=md-nav__link> <span class=md-ellipsis> Formato de Reglas </span> </a> <nav class=md-nav aria-label="Formato de Reglas"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#reglas-de-categoria class=md-nav__link> <span class=md-ellipsis> Reglas de Categoría </span> </a> </li> <li class=md-nav__item> <a href=#reglas-de-tiempo class=md-nav__link> <span class=md-ellipsis> Reglas de Tiempo </span> </a> </li> <li class=md-nav__item> <a href=#reglas-de-ubicacion class=md-nav__link> <span class=md-ellipsis> Reglas de Ubicación </span> </a> </li> <li class=md-nav__item> <a href=#reglas-de-producto class=md-nav__link> <span class=md-ellipsis> Reglas de Producto </span> </a> </li> <li class=md-nav__item> <a href=#reglas-de-combo class=md-nav__link> <span class=md-ellipsis> Reglas de Combo </span> </a> </li> <li class=md-nav__item> <a href=#reglas-de-usuario class=md-nav__link> <span class=md-ellipsis> Reglas de Usuario </span> </a> </li> <li class=md-nav__item> <a href=#reglas-de-orden class=md-nav__link> <span class=md-ellipsis> Reglas de Orden </span> </a> </li> <li class=md-nav__item> <a href=#ejemplo-de-uso-en-sql class=md-nav__link> <span class=md-ellipsis> Ejemplo de Uso en SQL </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#campos-detallados class=md-nav__link> <span class=md-ellipsis> Campos Detallados </span> </a> <nav class=md-nav aria-label="Campos Detallados"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#identificadores class=md-nav__link> <span class=md-ellipsis> Identificadores </span> </a> </li> <li class=md-nav__item> <a href=#informacion-basica class=md-nav__link> <span class=md-ellipsis> Información Básica </span> </a> </li> <li class=md-nav__item> <a href=#beneficios class=md-nav__link> <span class=md-ellipsis> Beneficios </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#validaciones class=md-nav__link> <span class=md-ellipsis> Validaciones </span> </a> <nav class=md-nav aria-label=Validaciones> <ul class=md-nav__list> <li class=md-nav__item> <a href=#validaciones-generales class=md-nav__link> <span class=md-ellipsis> Validaciones Generales </span> </a> </li> <li class=md-nav__item> <a href=#validaciones-de-negocio class=md-nav__link> <span class=md-ellipsis> Validaciones de Negocio </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#ejemplos-de-uso class=md-nav__link> <span class=md-ellipsis> Ejemplos de Uso </span> </a> <nav class=md-nav aria-label="Ejemplos de Uso"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#cupon-de-descuento-porcentual class=md-nav__link> <span class=md-ellipsis> Cupón de Descuento Porcentual </span> </a> </li> <li class=md-nav__item> <a href=#cupon-de-envio-gratis class=md-nav__link> <span class=md-ellipsis> Cupón de Envío Gratis </span> </a> </li> <li class=md-nav__item> <a href=#cupon-para-productos-especificos class=md-nav__link> <span class=md-ellipsis> Cupón para Productos Específicos </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#notas-de-implementacion class=md-nav__link> <span class=md-ellipsis> Notas de Implementación </span> </a> <nav class=md-nav aria-label="Notas de Implementación"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#gestion-de-redenciones class=md-nav__link> <span class=md-ellipsis> Gestión de Redenciones </span> </a> </li> <li class=md-nav__item> <a href=#optimizacion class=md-nav__link> <span class=md-ellipsis> Optimización </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#integracion-con-otros-sistemas class=md-nav__link> <span class=md-ellipsis> Integración con Otros Sistemas </span> </a> <nav class=md-nav aria-label="Integración con Otros Sistemas"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#apis class=md-nav__link> <span class=md-ellipsis> APIs </span> </a> </li> <li class=md-nav__item> <a href=#webhooks class=md-nav__link> <span class=md-ellipsis> Webhooks </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#preguntas-frecuentes class=md-nav__link> <span class=md-ellipsis> Preguntas Frecuentes </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=cupones>Cupones</h1> <p>Los cupones representan los descuentos y promociones que pueden ser aplicados a las órdenes en la plataforma Reten. Esta entidad almacena toda la información relevante sobre las condiciones, restricciones y beneficios de cada cupón.</p> <h2 id=estructura-de-datos>Estructura de Datos</h2> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=p>{</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=w>  </span><span class=c1>// Identificadores</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=w>  </span><span class=nt>&quot;coupon_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;string&quot;</span><span class=p>,</span><span class=w>        </span><span class=c1>// Identificador único del cupón (not null)</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=w>  </span><span class=nt>&quot;code&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;string&quot;</span><span class=p>,</span><span class=w>             </span><span class=c1>// Código del cupón para uso del cliente (not null)</span>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=w>  </span><span class=nt>&quot;external_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;string&quot;</span><span class=p>,</span><span class=w>      </span><span class=c1>// Identificador externo del cliente</span>
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=w>  </span><span class=c1>// Información básica</span>
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=w>  </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a><span class=w>    </span><span class=nt>&quot;display_name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;string&quot;</span><span class=p>,</span><span class=w>    </span><span class=c1>// Nombre para mostrar (not null)</span>
<a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a><span class=w>    </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;string&quot;</span><span class=w>      </span><span class=c1>// Descripción del cupón</span>
<a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a><span class=w>  </span><span class=p>},</span>
<a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a>
<a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a><span class=w>  </span><span class=c1>// Beneficio del cupón</span>
<a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a><span class=w>  </span><span class=nt>&quot;benefit&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a><span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;string&quot;</span><span class=p>,</span><span class=w>           </span><span class=c1>// Tipo de beneficio (percentage, fixed_amount, free_shipping) (not null)</span>
<a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a><span class=w>    </span><span class=nt>&quot;discount_value&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;number&quot;</span><span class=p>,</span><span class=w>  </span><span class=c1>// Valor del descuento (not null)</span>
<a id=__codelineno-0-17 name=__codelineno-0-17 href=#__codelineno-0-17></a><span class=w>    </span><span class=nt>&quot;minimum_purchase&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;number&quot;</span><span class=w> </span><span class=c1>// Monto mínimo de compra requerido</span>
<a id=__codelineno-0-18 name=__codelineno-0-18 href=#__codelineno-0-18></a><span class=w>  </span><span class=p>},</span>
<a id=__codelineno-0-19 name=__codelineno-0-19 href=#__codelineno-0-19></a>
<a id=__codelineno-0-20 name=__codelineno-0-20 href=#__codelineno-0-20></a><span class=w>  </span><span class=c1>// Estado y vigencia</span>
<a id=__codelineno-0-21 name=__codelineno-0-21 href=#__codelineno-0-21></a><span class=w>  </span><span class=nt>&quot;is_active&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;boolean&quot;</span><span class=p>,</span><span class=w>       </span><span class=c1>// Estado activo del cupón (not null)</span>
<a id=__codelineno-0-22 name=__codelineno-0-22 href=#__codelineno-0-22></a><span class=w>  </span><span class=nt>&quot;validity&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-0-23 name=__codelineno-0-23 href=#__codelineno-0-23></a><span class=w>    </span><span class=nt>&quot;start_date&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;timestamp&quot;</span><span class=p>,</span><span class=w>  </span><span class=c1>// Fecha de inicio de vigencia (not null)</span>
<a id=__codelineno-0-24 name=__codelineno-0-24 href=#__codelineno-0-24></a><span class=w>    </span><span class=nt>&quot;end_date&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;timestamp&quot;</span><span class=w>     </span><span class=c1>// Fecha de término de vigencia</span>
<a id=__codelineno-0-25 name=__codelineno-0-25 href=#__codelineno-0-25></a><span class=w>  </span><span class=p>},</span>
<a id=__codelineno-0-26 name=__codelineno-0-26 href=#__codelineno-0-26></a>
<a id=__codelineno-0-27 name=__codelineno-0-27 href=#__codelineno-0-27></a><span class=w>  </span><span class=c1>// Restricciones de uso</span>
<a id=__codelineno-0-28 name=__codelineno-0-28 href=#__codelineno-0-28></a><span class=w>  </span><span class=nt>&quot;usage_limits&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-0-29 name=__codelineno-0-29 href=#__codelineno-0-29></a><span class=w>    </span><span class=nt>&quot;max_uses&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;number&quot;</span><span class=p>,</span><span class=w>       </span><span class=c1>// Número máximo de usos totales</span>
<a id=__codelineno-0-30 name=__codelineno-0-30 href=#__codelineno-0-30></a><span class=w>    </span><span class=nt>&quot;uses_per_user&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;number&quot;</span><span class=w>   </span><span class=c1>// Número máximo de usos por usuario</span>
<a id=__codelineno-0-31 name=__codelineno-0-31 href=#__codelineno-0-31></a><span class=w>  </span><span class=p>},</span>
<a id=__codelineno-0-32 name=__codelineno-0-32 href=#__codelineno-0-32></a>
<a id=__codelineno-0-33 name=__codelineno-0-33 href=#__codelineno-0-33></a><span class=w>  </span><span class=c1>// Reglas de aplicación</span>
<a id=__codelineno-0-34 name=__codelineno-0-34 href=#__codelineno-0-34></a><span class=w>  </span><span class=nt>&quot;rules&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-0-35 name=__codelineno-0-35 href=#__codelineno-0-35></a><span class=w>    </span><span class=nt>&quot;category_rules&quot;</span><span class=p>:</span><span class=w> </span><span class=err>JSON</span><span class=p>,</span><span class=w>    </span><span class=c1>// Reglas de categorías</span>
<a id=__codelineno-0-36 name=__codelineno-0-36 href=#__codelineno-0-36></a><span class=w>    </span><span class=nt>&quot;time_rules&quot;</span><span class=p>:</span><span class=w> </span><span class=err>JSON</span><span class=p>,</span><span class=w>        </span><span class=c1>// Reglas de horarios</span>
<a id=__codelineno-0-37 name=__codelineno-0-37 href=#__codelineno-0-37></a><span class=w>    </span><span class=nt>&quot;location_rules&quot;</span><span class=p>:</span><span class=w> </span><span class=err>JSON</span><span class=p>,</span><span class=w>    </span><span class=c1>// Reglas de ubicación</span>
<a id=__codelineno-0-38 name=__codelineno-0-38 href=#__codelineno-0-38></a><span class=w>    </span><span class=nt>&quot;product_rules&quot;</span><span class=p>:</span><span class=w> </span><span class=err>JSON</span><span class=p>,</span><span class=w>     </span><span class=c1>// Reglas de productos</span>
<a id=__codelineno-0-39 name=__codelineno-0-39 href=#__codelineno-0-39></a><span class=w>    </span><span class=nt>&quot;combo_rules&quot;</span><span class=p>:</span><span class=w> </span><span class=err>JSON</span><span class=p>,</span><span class=w>       </span><span class=c1>// Reglas de combos</span>
<a id=__codelineno-0-40 name=__codelineno-0-40 href=#__codelineno-0-40></a><span class=w>    </span><span class=nt>&quot;user_rules&quot;</span><span class=p>:</span><span class=w> </span><span class=err>JSON</span><span class=p>,</span><span class=w>        </span><span class=c1>// Reglas de usuarios</span>
<a id=__codelineno-0-41 name=__codelineno-0-41 href=#__codelineno-0-41></a><span class=w>    </span><span class=nt>&quot;order_rules&quot;</span><span class=p>:</span><span class=w> </span><span class=err>JSON</span><span class=p>,</span><span class=w>       </span><span class=c1>// Reglas de órdenes</span>
<a id=__codelineno-0-42 name=__codelineno-0-42 href=#__codelineno-0-42></a><span class=w>    </span><span class=nt>&quot;custom_rules&quot;</span><span class=p>:</span><span class=w> </span><span class=err>JSON</span><span class=w>       </span><span class=c1>// Reglas personalizadas</span>
<a id=__codelineno-0-43 name=__codelineno-0-43 href=#__codelineno-0-43></a><span class=w>  </span><span class=p>},</span>
<a id=__codelineno-0-44 name=__codelineno-0-44 href=#__codelineno-0-44></a>
<a id=__codelineno-0-45 name=__codelineno-0-45 href=#__codelineno-0-45></a><span class=w>  </span><span class=c1>// Marcas temporales</span>
<a id=__codelineno-0-46 name=__codelineno-0-46 href=#__codelineno-0-46></a><span class=w>  </span><span class=nt>&quot;created_at&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;timestamp&quot;</span><span class=p>,</span><span class=w>    </span><span class=c1>// Fecha de creación (not null)</span>
<a id=__codelineno-0-47 name=__codelineno-0-47 href=#__codelineno-0-47></a><span class=w>  </span><span class=nt>&quot;updated_at&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;timestamp&quot;</span><span class=p>,</span><span class=w>    </span><span class=c1>// Última actualización (not null)</span>
<a id=__codelineno-0-48 name=__codelineno-0-48 href=#__codelineno-0-48></a><span class=w>  </span><span class=nt>&quot;_created_at&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;timestamp&quot;</span><span class=p>,</span><span class=w>   </span><span class=c1>// Fecha de creación en BigQuery (not null)</span>
<a id=__codelineno-0-49 name=__codelineno-0-49 href=#__codelineno-0-49></a><span class=w>  </span><span class=nt>&quot;_updated_at&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;timestamp&quot;</span><span class=w>    </span><span class=c1>// Última actualización en BigQuery (not null)</span>
<a id=__codelineno-0-50 name=__codelineno-0-50 href=#__codelineno-0-50></a><span class=p>}</span>
</code></pre></div> <h2 id=tipos-de-beneficio>Tipos de Beneficio</h2> <p>Los tipos de beneficio disponibles son:</p> <ul> <li><code>percentage</code>: Descuento porcentual sobre el monto</li> <li><code>fixed_amount</code>: Descuento de monto fijo</li> <li><code>free_shipping</code>: Envío gratis</li> <li><code>fixed_price</code>: Precio fijo especial</li> </ul> <h2 id=formato-de-reglas>Formato de Reglas</h2> <p>Cada tipo de regla se almacena como un campo de tipo <code>JSON</code> en la base de datos, lo que permite una estructura flexible y consultas eficientes:</p> <h3 id=reglas-de-categoria>Reglas de Categoría</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=p>{</span>
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=w>  </span><span class=nt>&quot;included_categories&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;category_1&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;category_2&quot;</span><span class=p>],</span>
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=w>  </span><span class=nt>&quot;excluded_categories&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;category_3&quot;</span><span class=p>]</span>
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=p>}</span>
</code></pre></div> <h3 id=reglas-de-tiempo>Reglas de Tiempo</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=p>{</span>
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=w>  </span><span class=nt>&quot;days&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;MONDAY&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;TUESDAY&quot;</span><span class=p>],</span>
<a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=w>  </span><span class=nt>&quot;start_time&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;09:00&quot;</span><span class=p>,</span>
<a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=w>  </span><span class=nt>&quot;end_time&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;18:00&quot;</span>
<a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=p>}</span>
</code></pre></div> <h3 id=reglas-de-ubicacion>Reglas de Ubicación</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=p>{</span>
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=w>  </span><span class=nt>&quot;territories&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;SANTIAGO&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;VALPARAISO&quot;</span><span class=p>],</span>
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=w>  </span><span class=nt>&quot;excluded_territories&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;PUNTA_ARENAS&quot;</span><span class=p>]</span>
<a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=p>}</span>
</code></pre></div> <h3 id=reglas-de-producto>Reglas de Producto</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=p>{</span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=w>  </span><span class=nt>&quot;included_products&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;SKU1&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;SKU2&quot;</span><span class=p>],</span>
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=w>  </span><span class=nt>&quot;excluded_products&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;SKU3&quot;</span><span class=p>],</span>
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=w>  </span><span class=nt>&quot;min_quantity&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>2</span>
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=p>}</span>
</code></pre></div> <h3 id=reglas-de-combo>Reglas de Combo</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=p>{</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=w>  </span><span class=nt>&quot;required_combinations&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[{</span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=w>    </span><span class=nt>&quot;products&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;SKU1&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;SKU2&quot;</span><span class=p>],</span>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=w>    </span><span class=nt>&quot;quantity&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span>
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=w>  </span><span class=p>}]</span>
<a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=p>}</span>
</code></pre></div> <h3 id=reglas-de-usuario>Reglas de Usuario</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=p>{</span>
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=w>  </span><span class=nt>&quot;customer_types&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;NEW&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;PREMIUM&quot;</span><span class=p>],</span>
<a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=w>  </span><span class=nt>&quot;excluded_users&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;USER1&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;USER2&quot;</span><span class=p>]</span>
<a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=p>}</span>
</code></pre></div> <h3 id=reglas-de-orden>Reglas de Orden</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=p>{</span>
<a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=w>  </span><span class=nt>&quot;min_items&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>2</span><span class=p>,</span>
<a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=w>  </span><span class=nt>&quot;payment_methods&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;CREDIT_CARD&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;DEBIT_CARD&quot;</span><span class=p>]</span>
<a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=p>}</span>
</code></pre></div> <h3 id=ejemplo-de-uso-en-sql>Ejemplo de Uso en SQL</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=c1>-- Crear tabla con campos JSON</span>
<a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>cupones</span><span class=w> </span><span class=p>(</span>
<a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=w>  </span><span class=n>id</span><span class=w> </span><span class=n>STRING</span><span class=p>,</span>
<a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=w>  </span><span class=n>code</span><span class=w> </span><span class=n>STRING</span><span class=p>,</span>
<a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=w>  </span><span class=n>rules</span><span class=w> </span><span class=n>STRUCT</span><span class=o>&lt;</span>
<a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=w>    </span><span class=n>category_rules</span><span class=w> </span><span class=n>JSON</span><span class=p>,</span>
<a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a><span class=w>    </span><span class=n>time_rules</span><span class=w> </span><span class=n>JSON</span><span class=p>,</span>
<a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a><span class=w>    </span><span class=n>location_rules</span><span class=w> </span><span class=n>JSON</span><span class=p>,</span>
<a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a><span class=w>    </span><span class=n>product_rules</span><span class=w> </span><span class=n>JSON</span><span class=p>,</span>
<a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a><span class=w>    </span><span class=n>combo_rules</span><span class=w> </span><span class=n>JSON</span><span class=p>,</span>
<a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a><span class=w>    </span><span class=n>user_rules</span><span class=w> </span><span class=n>JSON</span><span class=p>,</span>
<a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a><span class=w>    </span><span class=n>order_rules</span><span class=w> </span><span class=n>JSON</span><span class=p>,</span>
<a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a><span class=w>    </span><span class=n>custom_rules</span><span class=w> </span><span class=n>JSON</span>
<a id=__codelineno-8-14 name=__codelineno-8-14 href=#__codelineno-8-14></a><span class=w>  </span><span class=o>&gt;</span>
<a id=__codelineno-8-15 name=__codelineno-8-15 href=#__codelineno-8-15></a><span class=p>);</span>
<a id=__codelineno-8-16 name=__codelineno-8-16 href=#__codelineno-8-16></a>
<a id=__codelineno-8-17 name=__codelineno-8-17 href=#__codelineno-8-17></a><span class=c1>-- Insertar un cupón con reglas</span>
<a id=__codelineno-8-18 name=__codelineno-8-18 href=#__codelineno-8-18></a><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>cupones</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>code</span><span class=p>,</span><span class=w> </span><span class=n>rules</span><span class=p>)</span>
<a id=__codelineno-8-19 name=__codelineno-8-19 href=#__codelineno-8-19></a><span class=k>VALUES</span><span class=w> </span><span class=p>(</span>
<a id=__codelineno-8-20 name=__codelineno-8-20 href=#__codelineno-8-20></a><span class=w>  </span><span class=s1>&#39;COUPON1&#39;</span><span class=p>,</span>
<a id=__codelineno-8-21 name=__codelineno-8-21 href=#__codelineno-8-21></a><span class=w>  </span><span class=s1>&#39;WELCOME20&#39;</span><span class=p>,</span>
<a id=__codelineno-8-22 name=__codelineno-8-22 href=#__codelineno-8-22></a><span class=w>  </span><span class=n>STRUCT</span><span class=p>(</span>
<a id=__codelineno-8-23 name=__codelineno-8-23 href=#__codelineno-8-23></a><span class=w>    </span><span class=n>JSON</span><span class=w> </span><span class=s1>&#39;{&quot;included_categories&quot;: [&quot;ELECTRONICS&quot;]}&#39;</span><span class=p>,</span>
<a id=__codelineno-8-24 name=__codelineno-8-24 href=#__codelineno-8-24></a><span class=w>    </span><span class=n>JSON</span><span class=w> </span><span class=s1>&#39;{&quot;days&quot;: [&quot;MONDAY&quot;, &quot;TUESDAY&quot;]}&#39;</span><span class=p>,</span>
<a id=__codelineno-8-25 name=__codelineno-8-25 href=#__codelineno-8-25></a><span class=w>    </span><span class=k>NULL</span><span class=p>,</span>
<a id=__codelineno-8-26 name=__codelineno-8-26 href=#__codelineno-8-26></a><span class=w>    </span><span class=k>NULL</span><span class=p>,</span>
<a id=__codelineno-8-27 name=__codelineno-8-27 href=#__codelineno-8-27></a><span class=w>    </span><span class=k>NULL</span><span class=p>,</span>
<a id=__codelineno-8-28 name=__codelineno-8-28 href=#__codelineno-8-28></a><span class=w>    </span><span class=k>NULL</span><span class=p>,</span>
<a id=__codelineno-8-29 name=__codelineno-8-29 href=#__codelineno-8-29></a><span class=w>    </span><span class=k>NULL</span><span class=p>,</span>
<a id=__codelineno-8-30 name=__codelineno-8-30 href=#__codelineno-8-30></a><span class=w>    </span><span class=k>NULL</span>
<a id=__codelineno-8-31 name=__codelineno-8-31 href=#__codelineno-8-31></a><span class=w>  </span><span class=p>)</span>
<a id=__codelineno-8-32 name=__codelineno-8-32 href=#__codelineno-8-32></a><span class=p>);</span>
<a id=__codelineno-8-33 name=__codelineno-8-33 href=#__codelineno-8-33></a>
<a id=__codelineno-8-34 name=__codelineno-8-34 href=#__codelineno-8-34></a><span class=c1>-- Consultar cupones por categoría</span>
<a id=__codelineno-8-35 name=__codelineno-8-35 href=#__codelineno-8-35></a><span class=k>SELECT</span><span class=w> </span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>code</span>
<a id=__codelineno-8-36 name=__codelineno-8-36 href=#__codelineno-8-36></a><span class=k>FROM</span><span class=w> </span><span class=n>cupones</span>
<a id=__codelineno-8-37 name=__codelineno-8-37 href=#__codelineno-8-37></a><span class=k>WHERE</span><span class=w> </span><span class=n>JSON_VALUE</span><span class=p>(</span><span class=n>rules</span><span class=p>.</span><span class=n>category_rules</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;$.included_categories[0]&#39;</span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;ELECTRONICS&#39;</span><span class=p>;</span>
<a id=__codelineno-8-38 name=__codelineno-8-38 href=#__codelineno-8-38></a>
<a id=__codelineno-8-39 name=__codelineno-8-39 href=#__codelineno-8-39></a><span class=c1>-- Actualizar reglas de tiempo</span>
<a id=__codelineno-8-40 name=__codelineno-8-40 href=#__codelineno-8-40></a><span class=k>UPDATE</span><span class=w> </span><span class=n>cupones</span>
<a id=__codelineno-8-41 name=__codelineno-8-41 href=#__codelineno-8-41></a><span class=k>SET</span><span class=w> </span><span class=n>rules</span><span class=p>.</span><span class=n>time_rules</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>JSON</span><span class=w> </span><span class=s1>&#39;{&quot;days&quot;: [&quot;MONDAY&quot;, &quot;TUESDAY&quot;, &quot;WEDNESDAY&quot;]}&#39;</span>
<a id=__codelineno-8-42 name=__codelineno-8-42 href=#__codelineno-8-42></a><span class=k>WHERE</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;COUPON1&#39;</span><span class=p>;</span>
</code></pre></div> <h2 id=campos-detallados>Campos Detallados</h2> <h3 id=identificadores>Identificadores</h3> <table> <thead> <tr> <th>Campo</th> <th>Tipo</th> <th>Requerido</th> <th>Descripción</th> </tr> </thead> <tbody> <tr> <td>coupon_id</td> <td>string</td> <td>Sí</td> <td>Identificador único del cupón</td> </tr> <tr> <td>code</td> <td>string</td> <td>Sí</td> <td>Código para redención del cupón</td> </tr> <tr> <td>data_object_id</td> <td>string</td> <td>Sí</td> <td>ID del objeto de datos</td> </tr> </tbody> </table> <h3 id=informacion-basica>Información Básica</h3> <table> <thead> <tr> <th>Campo</th> <th>Tipo</th> <th>Requerido</th> <th>Descripción</th> </tr> </thead> <tbody> <tr> <td>display_name</td> <td>string</td> <td>Sí</td> <td>Nombre para mostrar</td> </tr> <tr> <td>description</td> <td>string</td> <td>No</td> <td>Descripción del cupón</td> </tr> </tbody> </table> <p><strong>Estados Válidos del Cupón:</strong> - <code>active</code>: Cupón activo y disponible - <code>inactive</code>: Cupón temporalmente desactivado - <code>expired</code>: Cupón expirado - <code>depleted</code>: Cupón sin usos disponibles</p> <h3 id=beneficios>Beneficios</h3> <table> <thead> <tr> <th>Campo</th> <th>Tipo</th> <th>Descripción</th> </tr> </thead> <tbody> <tr> <td>type</td> <td>string</td> <td>Tipo de beneficio</td> </tr> <tr> <td>discount_value</td> <td>number</td> <td>Valor del descuento</td> </tr> <tr> <td>minimum_purchase</td> <td>number</td> <td>Monto mínimo de compra requerido</td> </tr> </tbody> </table> <p><strong>Tipos de Beneficio:</strong> - <code>percentage</code>: Descuento porcentual - <code>fixed_amount</code>: Descuento de monto fijo - <code>free_shipping</code>: Envío gratis - <code>fixed_price</code>: Precio fijo especial</p> <h2 id=validaciones>Validaciones</h2> <h3 id=validaciones-generales>Validaciones Generales</h3> <ol> <li><strong>Identificadores</strong></li> <li><code>coupon_id</code> debe ser único en todo el sistema</li> <li><code>code</code> debe ser único y alfanumérico</li> <li> <p><code>code</code> debe ser fácil de recordar y usar</p> </li> <li> <p><strong>Vigencia</strong></p> </li> <li><code>start_date</code> debe ser anterior a <code>end_date</code></li> <li>Fechas deben estar en formato ISO 8601</li> <li> <p>Zona horaria debe ser válida</p> </li> <li> <p><strong>Límites de Uso</strong></p> </li> <li><code>max_uses</code> debe ser mayor a cero</li> <li><code>uses_per_user</code> debe ser menor o igual a <code>max_uses</code></li> <li><code>minimum_purchase</code> debe ser mayor a cero</li> </ol> <h3 id=validaciones-de-negocio>Validaciones de Negocio</h3> <ol> <li><strong>Beneficios</strong></li> <li>Porcentajes deben estar entre 0 y 100</li> <li>Montos fijos deben ser positivos</li> <li> <p>Moneda debe ser válida</p> </li> <li> <p><strong>Condiciones</strong></p> </li> <li>Métodos de pago deben existir</li> <li>Territorios deben ser válidos</li> <li>Horarios deben ser coherentes</li> </ol> <h2 id=ejemplos-de-uso>Ejemplos de Uso</h2> <h3 id=cupon-de-descuento-porcentual>Cupón de Descuento Porcentual</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=p>{</span>
<a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=w>  </span><span class=nt>&quot;coupon_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;COUPON_001&quot;</span><span class=p>,</span>
<a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=w>  </span><span class=nt>&quot;code&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;WELCOME20&quot;</span><span class=p>,</span>
<a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=w>  </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=w>    </span><span class=nt>&quot;display_name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;20% de Descuento Bienvenida&quot;</span><span class=p>,</span>
<a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a><span class=w>    </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Descuento de bienvenida para nuevos clientes&quot;</span>
<a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a><span class=w>  </span><span class=p>},</span>
<a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a><span class=w>  </span><span class=nt>&quot;is_active&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span>
<a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a><span class=w>  </span><span class=nt>&quot;validity&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a><span class=w>    </span><span class=nt>&quot;start_date&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-03-01T00:00:00Z&quot;</span><span class=p>,</span>
<a id=__codelineno-9-11 name=__codelineno-9-11 href=#__codelineno-9-11></a><span class=w>    </span><span class=nt>&quot;end_date&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-12-31T23:59:59Z&quot;</span>
<a id=__codelineno-9-12 name=__codelineno-9-12 href=#__codelineno-9-12></a><span class=w>  </span><span class=p>},</span>
<a id=__codelineno-9-13 name=__codelineno-9-13 href=#__codelineno-9-13></a><span class=w>  </span><span class=nt>&quot;usage_limits&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-9-14 name=__codelineno-9-14 href=#__codelineno-9-14></a><span class=w>    </span><span class=nt>&quot;max_uses&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1000</span><span class=p>,</span>
<a id=__codelineno-9-15 name=__codelineno-9-15 href=#__codelineno-9-15></a><span class=w>    </span><span class=nt>&quot;uses_per_user&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span>
<a id=__codelineno-9-16 name=__codelineno-9-16 href=#__codelineno-9-16></a><span class=w>  </span><span class=p>},</span>
<a id=__codelineno-9-17 name=__codelineno-9-17 href=#__codelineno-9-17></a><span class=w>  </span><span class=nt>&quot;benefit&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-9-18 name=__codelineno-9-18 href=#__codelineno-9-18></a><span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;percentage&quot;</span><span class=p>,</span>
<a id=__codelineno-9-19 name=__codelineno-9-19 href=#__codelineno-9-19></a><span class=w>    </span><span class=nt>&quot;discount_value&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>20</span><span class=p>,</span>
<a id=__codelineno-9-20 name=__codelineno-9-20 href=#__codelineno-9-20></a><span class=w>    </span><span class=nt>&quot;minimum_purchase&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>20000</span>
<a id=__codelineno-9-21 name=__codelineno-9-21 href=#__codelineno-9-21></a><span class=w>  </span><span class=p>},</span>
<a id=__codelineno-9-22 name=__codelineno-9-22 href=#__codelineno-9-22></a><span class=w>  </span><span class=nt>&quot;rules&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-9-23 name=__codelineno-9-23 href=#__codelineno-9-23></a><span class=w>    </span><span class=nt>&quot;category_rules&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;new_customers&quot;</span>
<a id=__codelineno-9-24 name=__codelineno-9-24 href=#__codelineno-9-24></a><span class=w>  </span><span class=p>}</span>
<a id=__codelineno-9-25 name=__codelineno-9-25 href=#__codelineno-9-25></a><span class=p>}</span>
</code></pre></div> <h3 id=cupon-de-envio-gratis>Cupón de Envío Gratis</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=p>{</span>
<a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=w>  </span><span class=nt>&quot;coupon_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;COUPON_002&quot;</span><span class=p>,</span>
<a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=w>  </span><span class=nt>&quot;code&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;FREESHIP&quot;</span><span class=p>,</span>
<a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=w>  </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=w>    </span><span class=nt>&quot;display_name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Envío Gratis en tu Primera Compra&quot;</span><span class=p>,</span>
<a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=w>    </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Envío gratis en pedidos superiores a $30.000&quot;</span>
<a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a><span class=w>  </span><span class=p>},</span>
<a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a><span class=w>  </span><span class=nt>&quot;benefit&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a><span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;free_shipping&quot;</span><span class=p>,</span>
<a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a><span class=w>    </span><span class=nt>&quot;minimum_purchase&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>30000</span>
<a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a><span class=w>  </span><span class=p>},</span>
<a id=__codelineno-10-12 name=__codelineno-10-12 href=#__codelineno-10-12></a><span class=w>  </span><span class=nt>&quot;usage_limits&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-10-13 name=__codelineno-10-13 href=#__codelineno-10-13></a><span class=w>    </span><span class=nt>&quot;max_uses&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1000</span><span class=p>,</span>
<a id=__codelineno-10-14 name=__codelineno-10-14 href=#__codelineno-10-14></a><span class=w>    </span><span class=nt>&quot;uses_per_user&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span>
<a id=__codelineno-10-15 name=__codelineno-10-15 href=#__codelineno-10-15></a><span class=w>  </span><span class=p>},</span>
<a id=__codelineno-10-16 name=__codelineno-10-16 href=#__codelineno-10-16></a><span class=w>  </span><span class=nt>&quot;rules&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-10-17 name=__codelineno-10-17 href=#__codelineno-10-17></a><span class=w>    </span><span class=nt>&quot;location_rules&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;first_purchase&quot;</span>
<a id=__codelineno-10-18 name=__codelineno-10-18 href=#__codelineno-10-18></a><span class=w>  </span><span class=p>}</span>
<a id=__codelineno-10-19 name=__codelineno-10-19 href=#__codelineno-10-19></a><span class=p>}</span>
</code></pre></div> <h3 id=cupon-para-productos-especificos>Cupón para Productos Específicos</h3> <div class=highlight><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=p>{</span>
<a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=w>  </span><span class=nt>&quot;coupon_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;COUPON_003&quot;</span><span class=p>,</span>
<a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=w>  </span><span class=nt>&quot;code&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;PAINT25&quot;</span><span class=p>,</span>
<a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=w>  </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=w>    </span><span class=nt>&quot;display_name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;25% en Pinturas Premium&quot;</span><span class=p>,</span>
<a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a><span class=w>    </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Descuento exclusivo en línea de pinturas premium&quot;</span>
<a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a><span class=w>  </span><span class=p>},</span>
<a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a><span class=w>  </span><span class=nt>&quot;benefit&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-11-9 name=__codelineno-11-9 href=#__codelineno-11-9></a><span class=w>    </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;percentage&quot;</span><span class=p>,</span>
<a id=__codelineno-11-10 name=__codelineno-11-10 href=#__codelineno-11-10></a><span class=w>    </span><span class=nt>&quot;discount_value&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>25</span><span class=p>,</span>
<a id=__codelineno-11-11 name=__codelineno-11-11 href=#__codelineno-11-11></a><span class=w>    </span><span class=nt>&quot;minimum_purchase&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>25000</span>
<a id=__codelineno-11-12 name=__codelineno-11-12 href=#__codelineno-11-12></a><span class=w>  </span><span class=p>},</span>
<a id=__codelineno-11-13 name=__codelineno-11-13 href=#__codelineno-11-13></a><span class=w>  </span><span class=nt>&quot;rules&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-11-14 name=__codelineno-11-14 href=#__codelineno-11-14></a><span class=w>    </span><span class=nt>&quot;product_rules&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;premium_paints&quot;</span>
<a id=__codelineno-11-15 name=__codelineno-11-15 href=#__codelineno-11-15></a><span class=w>  </span><span class=p>}</span>
<a id=__codelineno-11-16 name=__codelineno-11-16 href=#__codelineno-11-16></a><span class=p>}</span>
</code></pre></div> <h2 id=notas-de-implementacion>Notas de Implementación</h2> <h3 id=gestion-de-redenciones>Gestión de Redenciones</h3> <ol> <li><strong>Validación en Tiempo Real</strong></li> <li>Verificar vigencia</li> <li>Validar límites de uso</li> <li> <p>Comprobar condiciones</p> </li> <li> <p><strong>Registro de Uso</strong></p> </li> <li>Actualizar contadores</li> <li>Registrar usuario y orden</li> <li>Mantener historial</li> </ol> <h3 id=optimizacion>Optimización</h3> <ol> <li><strong>Caché</strong></li> <li>Cachear cupones activos</li> <li>Invalidar al actualizar</li> <li> <p>Precalcular elegibilidad</p> </li> <li> <p><strong>Búsqueda</strong></p> </li> <li>Índices por código</li> <li>Búsqueda por condiciones</li> <li>Filtros de vigencia</li> </ol> <h2 id=integracion-con-otros-sistemas>Integración con Otros Sistemas</h2> <h3 id=apis>APIs</h3> <ol> <li> <p><strong>Endpoints Principales</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a>GET    /api/v1/coupons/{coupon_id}
<a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>POST   /api/v1/coupons
<a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a>PUT    /api/v1/coupons/{coupon_id}
<a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a>PATCH  /api/v1/coupons/{coupon_id}
<a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a>DELETE /api/v1/coupons/{coupon_id}
</code></pre></div></p> </li> <li> <p><strong>Endpoints de Validación</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a>POST   /api/v1/coupons/validate
<a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a>GET    /api/v1/coupons/{code}/check
<a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a>POST   /api/v1/coupons/{code}/apply
</code></pre></div></p> </li> </ol> <h3 id=webhooks>Webhooks</h3> <ol> <li><strong>Eventos Disponibles</strong></li> <li><code>coupon.created</code></li> <li><code>coupon.updated</code></li> <li><code>coupon.status_changed</code></li> <li><code>coupon.redeemed</code></li> <li> <p><code>coupon.depleted</code></p> </li> <li> <p><strong>Formato de Payload</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=p>{</span>
<a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=w>  </span><span class=nt>&quot;event&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;coupon.redeemed&quot;</span><span class=p>,</span>
<a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=w>  </span><span class=nt>&quot;timestamp&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-03-19T14:30:00Z&quot;</span><span class=p>,</span>
<a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=w>  </span><span class=nt>&quot;data&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=w>    </span><span class=nt>&quot;coupon_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;string&quot;</span><span class=p>,</span>
<a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a><span class=w>    </span><span class=nt>&quot;code&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;string&quot;</span><span class=p>,</span>
<a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a><span class=w>    </span><span class=nt>&quot;order_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;string&quot;</span><span class=p>,</span>
<a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a><span class=w>    </span><span class=nt>&quot;user_id&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;string&quot;</span><span class=p>,</span>
<a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a><span class=w>    </span><span class=nt>&quot;discount_amount&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;number&quot;</span>
<a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a><span class=w>  </span><span class=p>}</span>
<a id=__codelineno-14-11 name=__codelineno-14-11 href=#__codelineno-14-11></a><span class=p>}</span>
</code></pre></div></p> </li> </ol> <h2 id=preguntas-frecuentes>Preguntas Frecuentes</h2> <ol> <li><strong>¿Cómo manejar cupones expirados?</strong></li> <li>Mantener registro histórico</li> <li>Notificar a usuarios afectados</li> <li> <p>Sugerir alternativas válidas</p> </li> <li> <p><strong>¿Cómo gestionar conflictos entre cupones?</strong></p> </li> <li>Definir reglas de precedencia</li> <li>Establecer compatibilidad</li> <li> <p>Mostrar mejor opción al usuario</p> </li> <li> <p><strong>¿Cómo prevenir el abuso de cupones?</strong></p> </li> <li>Validar límites estrictamente</li> <li>Implementar detección de fraude</li> <li>Monitorear patrones de uso </li> </ol> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Volver al principio </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.highlight", "search.share", "search.suggest", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}}</script> <script src=../../assets/javascripts/bundle.c8b220af.min.js></script> </body> </html>